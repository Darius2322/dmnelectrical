<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iggy Power Solutions - Quality Electrical Products & Services</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FFD700;
            --secondary: #0033A0;
            --dark: #1A1A1A;
            --light: #F5F5F5;
            --gray: #777;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --electric-blue: #0066cc;
            --electric-yellow: #FFEE58;
            --spark-blue: #4A90E2;
            --spark-orange: #FF6B35;
            --contact-bg: #2C3E50;
            --problem-solver-bg: #8B0000;
            --problem-solver-light: #a52a2a;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header Styles */
        header {
            background-color: var(--secondary);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            flex: 0 1 auto;
            min-width: 180px;
        }

        .logo-img {
            width: 50px;
            height: 50px;
            background-color: var(--primary);
            border-radius: 50%;
            margin-right: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--secondary);
            font-weight: bold;
            font-size: 1.2rem;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-slogan {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 2px;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 600;
        }

        /* Header Right Section */
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
            justify-content: flex-end;
        }

        /* Search Box */
        .search-box {
            position: relative;
            width: 400px;
            margin-right: 10px;
        }

        .search-box input {
            width: 100%;
            padding: 12px 20px;
            border-radius: 30px;
            border: none;
            outline: none;
            font-size: 0.95rem;
            background: rgba(255, 255, 255, 0.95);
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .search-box input:focus {
            background: white;
            box-shadow: 0 0 0 2px var(--primary), 0 4px 15px rgba(0, 0, 0, 0.15);
            transform: translateY(-1px);
        }

        .search-box i {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            transition: color 0.3s ease;
            font-size: 1rem;
        }

        .search-box input:focus + i {
            color: var(--secondary);
        }

        /* Cart Icon */
        .cart-icon {
            position: relative;
            font-size: 1.3rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .cart-icon:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--primary);
            color: var(--dark);
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        /* Mobile Toggle Button */
        .mobile-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.3rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2001;
            margin-right: 10px;
        }

        .mobile-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        /* Navigation */
        nav {
            background-color: var(--dark);
            padding: 10px 0;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            justify-content: center;
            gap: 30px;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .nav-links a:hover {
            color: var(--primary);
        }

        /* Mobile Menu */
        .mobile-menu {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 280px;
            height: 100%;
            background: linear-gradient(135deg, var(--secondary) 0%, #002a7a 100%);
            z-index: 2000;
            overflow-y: auto;
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.3);
        }

        .mobile-menu.active {
            transform: translateX(0);
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .mobile-menu-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .mobile-menu-logo i {
            color: var(--primary);
            font-size: 1.4rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .close-menu {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 1.3rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .close-menu:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .mobile-nav-links {
            list-style: none;
            padding: 20px;
            margin: 0;
        }

        .mobile-nav-links li {
            margin-bottom: 8px;
            opacity: 0;
            transform: translateX(20px);
            animation: slideInLeft 0.5s ease forwards;
        }

        .mobile-nav-links li:nth-child(1) { animation-delay: 0.1s; }
        .mobile-nav-links li:nth-child(2) { animation-delay: 0.15s; }
        .mobile-nav-links li:nth-child(3) { animation-delay: 0.2s; }
        .mobile-nav-links li:nth-child(4) { animation-delay: 0.25s; }
        .mobile-nav-links li:nth-child(5) { animation-delay: 0.3s; }
        .mobile-nav-links li:nth-child(6) { animation-delay: 0.35s; }
        .mobile-nav-links li:nth-child(7) { animation-delay: 0.4s; }

        @keyframes slideInLeft {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .mobile-nav-links a {
            color: white;
            text-decoration: none;
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .mobile-nav-links a:hover {
            background: rgba(255, 255, 255, 0.15);
            color: var(--primary);
            transform: translateX(-8px);
            border-color: rgba(255, 215, 0, 0.3);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1621905252507-b35492cc74b4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2069&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 100px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--electric-blue) 10%, transparent 10%, transparent 20%, var(--electric-yellow) 20%, var(--electric-yellow) 30%, transparent 30%, transparent 40%, var(--electric-blue) 40%);
            opacity: 0.1;
            z-index: 0;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
        }
        
        .hero h2 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
        }
        
        .hero-features {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        
        .hero-feature {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 30px;
            backdrop-filter: blur(5px);
        }
        
        .hero-feature i {
            color: var(--primary);
        }
        
        .btn {
            display: inline-block;
            padding: 12px 30px;
            background-color: var(--primary);
            color: var(--dark);
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        .btn:hover {
            background-color: #e6c200;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn-secondary {
            background-color: var(--electric-blue);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #0055aa;
        }
        
        .btn-whatsapp {
            background-color: #25D366;
            color: white;
        }
        
        .btn-whatsapp:hover {
            background-color: #128C7E;
        }
        
        /* Products Section */
        .section-title {
            text-align: center;
            margin: 50px 0 30px;
            font-size: 2rem;
            color: var(--secondary);
            position: relative;
        }
        
        .section-title::after {
            content: "";
            display: block;
            width: 80px;
            height: 4px;
            background: var(--primary);
            margin: 10px auto;
            border-radius: 2px;
        }
        
        /* Product Categories */
        .categories {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .category-btn {
            padding: 10px 20px;
            background-color: white;
            border: 2px solid var(--secondary);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .category-btn.active {
            background-color: var(--secondary);
            color: white;
        }
        
        .category-btn:hover:not(.active) {
            background-color: #f0f0f0;
        }
        
        /* Products Grid - 2 columns layout */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-bottom: 50px;
        }
        
        .product-card {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            position: relative;
        }
        
        .product-card:hover {
            transform: translateY(-10px);
        }
        
        .product-img {
            height: 200px;
            background-color: #f8f8f8;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3rem;
            color: var(--secondary);
            position: relative;
            overflow: hidden;
        }
        
        .product-img::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--electric-blue) 0%, transparent 50%, var(--electric-yellow) 100%);
            opacity: 0.1;
        }
        
        .out-of-stock-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--danger);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .product-info {
            padding: 20px;
        }
        
        .product-info h3 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .product-info p {
            color: var(--gray);
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        
        .product-price {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 15px;
        }
        
        .product-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .add-to-cart {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            justify-content: center;
        }
        
        .add-to-cart:hover {
            background-color: #002a7a;
        }
        
        .detail-btn {
            background-color: var(--electric-blue);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            justify-content: center;
        }
        
        .detail-btn:hover {
            background-color: #0055aa;
        }
        
        .notify-btn {
            background-color: var(--warning);
            color: var(--dark);
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            justify-content: center;
        }
        
        .notify-btn:hover {
            background-color: #e0a800;
        }
        
        /* Services Section */
        .services {
            background-color: var(--secondary);
            color: white;
            padding: 70px 0;
            position: relative;
            overflow: hidden;
        }
        
        .services::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            z-index: 0;
        }
        
        /* Services Grid - 2 columns layout */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            position: relative;
            z-index: 1;
        }
        
        .service-card {
            background-color: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .service-card:hover {
            transform: translateY(-10px);
        }
        
        .service-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .service-card h3 {
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .service-card p {
            margin-bottom: 20px;
        }
        
        .service-price {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .service-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        /* Gallery Section */
        .gallery {
            padding: 70px 0;
            background-color: #f9f9f9;
        }
        
        .gallery-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .gallery-tab {
            padding: 10px 20px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .gallery-tab.active {
            background-color: var(--secondary);
            color: white;
        }
        
        .gallery-content {
            display: none;
        }
        
        .gallery-content.active {
            display: block;
        }
        
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .gallery-item {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            height: 250px;
        }
        
        .gallery-item img, .gallery-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .gallery-item:hover img, .gallery-item:hover video {
            transform: scale(1.05);
        }
        
        .gallery-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            color: white;
            padding: 20px;
            transform: translateY(100%);
            transition: transform 0.3s;
        }
        
        .gallery-item:hover .gallery-overlay {
            transform: translateY(0);
        }
        
        /* Problem Solver Section */
        .problem-solver {
            padding: 70px 0;
            background: linear-gradient(135deg, var(--problem-solver-bg) 0%, var(--problem-solver-light) 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .problem-solver::before {
            content: "\f0e7";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20rem;
            opacity: 0.05;
            z-index: 0;
            color: white;
        }
        
        .problem-form {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
            position: relative;
            z-index: 1;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 5px;
            border: 1px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
        }
        
        .form-group input::placeholder, .form-group textarea::placeholder {
            color: rgba(255,255,255,0.7);
        }
        
        /* Enhanced Camera Interface */
        .camera-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            width: 100%;
        }
        
        #camera-preview, #video-recorder {
            width: 100%;
            max-width: 400px;
            height: 300px;
            background-color: #000;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        #camera-preview video, #video-recorder video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .camera-controls, .video-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            width: 100%;
        }
        
        #captured-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 10px;
            display: none;
        }
        
        .camera-switch, .video-switch {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
        }
        
        .discard-btn {
            background-color: var(--danger);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            justify-content: center;
        }
        
        .discard-btn:hover {
            background-color: #c82333;
        }
        
        .captured-media-container {
            position: relative;
            display: inline-block;
            margin-top: 10px;
        }
        
        .media-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
        }

        /* Add to existing CSS */
.wishlist-icon {
    position: relative;
    font-size: 1.3rem;
    cursor: pointer;
    padding: 8px;
    border-radius: 8px;
    transition: all 0.3s ease;
    margin-right: 10px;
    color: white;
}

.wishlist-icon:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: scale(1.05);
}

.wishlist-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background-color: var(--primary);
    color: var(--dark);
    font-size: 0.7rem;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
}

.wishlist-btn {
    position: absolute;
    top: 10px;
    left: 10px;
    background: rgba(255, 255, 255, 0.9);
    border: none;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #ccc;
}

.wishlist-btn.active {
    color: #ff4757;
}

.wishlist-btn:hover {
    background: white;
    transform: scale(1.1);
}

/* Voice Recording Styles */
.voice-recorder-container {
    border: 2px dashed rgba(255, 255, 255, 0.3);
    border-radius: 10px;
    padding: 20px;
    margin-top: 10px;
}

#voice-recording-indicator {
    background: rgba(255, 0, 0, 0.1);
    border-radius: 8px;
    margin-bottom: 15px;
}

#recording-timer {
    font-size: 1.2rem;
    font-weight: bold;
    margin-top: 10px;
}

.voice-controls {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 15px;
}

/* Activity Log Styles */
.activity-log {
    margin-top: 30px;
    background: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.activity-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid #eee;
}

.activity-item:last-child {
    border-bottom: none;
}

.activity-description {
    flex: 1;
    font-weight: 500;
}

.activity-time {
    color: var(--gray);
    font-size: 0.9rem;
}

/* Preview Caption Styles */
.preview-caption {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 5px 8px;
    font-size: 0.8rem;
    text-align: center;
}

/* Form Actions for Problem Solver */
.problem-solver .form-actions {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 20px;
}

.problem-solver .form-actions .btn {
    flex: 1;
    max-width: 200px;
}
        
        /* Quotation Section */
        .quotation {
            padding: 70px 0;
            background: linear-gradient(135deg, var(--spark-blue) 0%, var(--secondary) 100%);
            color: white;
        }
        
        .quotation-form {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        /* Contact Section */
        .contact {
            padding: 70px 0;
            background: var(--contact-bg);
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .contact::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            z-index: 0;
        }
        
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            position: relative;
            z-index: 1;
        }
        
        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .contact-icon {
            font-size: 1.5rem;
            color: var(--primary);
            margin-top: 5px;
        }
        
        .contact-details h3 {
            margin-bottom: 5px;
        }
        
        .contact-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        
        .contact-form {
            background-color: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        /* Cart Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            width: 90%;
            max-width: 800px;
            border-radius: 10px;
            padding: 30px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
            background: none;
            border: none;
        }
        
        .modal-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .cart-items {
            margin-bottom: 20px;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .cart-item-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .cart-item-img {
            width: 60px;
            height: 60px;
            background-color: #f8f8f8;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            font-size: 1.5rem;
            color: var(--secondary);
        }
        
        .cart-item-details h4 {
            margin-bottom: 5px;
        }
        
        .cart-item-price {
            color: var(--secondary);
            font-weight: 600;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid #ddd;
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        
        .remove-item {
            color: var(--danger);
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding-top: 15px;
            border-top: 2px solid #eee;
        }
        
        .checkout-btn {
            width: 100%;
            padding: 15px;
            background-color: var(--success);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            transition: background-color 0.3s;
        }
        
        .checkout-btn:hover {
            background-color: #218838;
        }
        
        /* Footer */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 50px 0 20px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-column h3 {
            margin-bottom: 20px;
            font-size: 1.3rem;
            color: var(--primary);
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: var(--primary);
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-icons a {
            color: white;
            font-size: 1.2rem;
            transition: color 0.3s;
        }
        
        .social-icons a:hover {
            color: var(--primary);
        }
        
        .developer-contact {
            background-color: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }
        
        .developer-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #444;
            color: #aaa;
            font-size: 0.9rem;
        }
        
        /* Product Detail Modal */
        .product-detail, .service-detail {
            display: flex;
            gap: 30px;
        }
        
        .product-detail-img, .service-detail-img {
            flex: 1;
            background-color: #f8f8f8;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 5rem;
            color: var(--secondary);
        }
        
        .product-detail-info, .service-detail-info {
            flex: 1;
        }
        
        .product-detail-info h2, .service-detail-info h2 {
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .product-detail-info .price, .service-detail-info .price {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 15px;
        }
        
        .product-detail-info .description, .service-detail-info .description {
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .product-specs, .service-features {
            margin-bottom: 20px;
        }
        
        .product-specs h3, .service-features h3 {
            margin-bottom: 10px;
        }
        
        .product-specs ul, .service-features ul {
            list-style-type: none;
        }
        
        .product-specs li, .service-features li {
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .product-specs i, .service-features i {
            color: var(--success);
        }
        
        /* Search Results */
        .search-results {
            display: none;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            max-height: 300px;
            overflow-y: auto;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            z-index: 100;
        }

        .search-result-item {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--dark);
            background-color: white;
            transition: background-color 0.3s;
        }

        .search-result-item:hover {
            background-color: #f5f5f5;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-icon {
            font-size: 1.2rem;
            color: var(--secondary);
            flex-shrink: 0;
        }

        .search-result-item > div {
            flex: 1;
        }

        .search-result-item h4 {
            color: var(--dark);
            margin-bottom: 4px;
            font-size: 1rem;
            font-weight: 600;
        }

        .search-result-item p {
            color: var(--gray);
            font-size: 0.85rem;
            margin-bottom: 4px;
            line-height: 1.4;
        }

        .search-result-item small {
            color: var(--secondary);
            font-weight: 500;
            font-size: 0.8rem;
        }
        
        /* Scroll to top button */
        .scroll-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--secondary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            opacity: 0;
            visibility: hidden;
        }
        
        .scroll-top.active {
            opacity: 1;
            visibility: visible;
        }
        
        .scroll-top:hover {
            background-color: var(--electric-blue);
            transform: translateY(-5px);
        }
        
        /* Notification Toast - Positioned top left */
        .toast {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: var(--success);
            color: white;
            padding: 12px 24px;
            border-radius: 5px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .toast.show {
            opacity: 1;
            visibility: visible;
        }
        
        .toast.error {
            background-color: var(--danger);
        }
        
        .toast.warning {
            background-color: var(--warning);
            color: var(--dark);
        }
        
        /* Custom dropdown styling */
        .custom-dropdown {
            position: relative;
            width: 100%;
        }
        
        .custom-dropdown select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 15px;
            padding-right: 40px;
            color: white;
        }
        
        /* Fix dropdown options visibility */
        .custom-dropdown select option {
            background-color: white;
            color: var(--dark);
            padding: 10px;
        }
        
        /* Change text color when focused/selected */
        .custom-dropdown select:focus,
        .custom-dropdown select:valid {
            color: var(--dark);
            background-color: rgba(255,255,255,0.9);
        }
        
        /* Other input field */
        .other-input {
            margin-top: 10px;
            display: none;
        }
        
        /* Developer contact section */
        .developer-contact-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        
        .developer-contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
        }
        
        .developer-contact-item i {
            color: var(--primary);
        }
        
        /* Account Section Styles */
        .account {
            padding: 70px 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
        }

        .account-container {
            max-width: 450px;
            margin: 0 auto;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            padding: 40px 30px;
            position: relative;
            overflow: hidden;
        }

        .account-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }

        .account-form h3 {
            margin-bottom: 25px;
            color: var(--secondary);
            text-align: center;
            font-size: 1.8rem;
            font-weight: 600;
            position: relative;
            padding-bottom: 15px;
        }

        .account-form h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--primary);
            border-radius: 3px;
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .form-group input {
            width: 100%;
            padding: 14px 16px;
            border-radius: 10px;
            border: 2px solid #e1e5ee;
            background-color: #f8f9fa;
            font-size: 1rem;
            transition: all 0.3s ease;
            color: var(--dark);
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--secondary);
            background-color: white;
            box-shadow: 0 0 0 3px rgba(0, 51, 160, 0.1);
        }

        .form-group input::placeholder {
            color: #a0a4a8;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        .form-actions {
            text-align: center;
            margin-top: 30px;
        }

        .form-actions p {
            margin-top: 20px;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .form-actions a {
            color: var(--secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .form-actions a:hover {
            color: var(--primary);
            text-decoration: underline;
        }

        .account-toggle {
            display: flex;
            margin-bottom: 30px;
            border-radius: 10px;
            overflow: hidden;
            background-color: #f0f2f5;
            padding: 5px;
        }

        .account-toggle-btn {
            flex: 1;
            padding: 12px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: var(--gray);
            transition: all 0.3s ease;
            border-radius: 8px;
        }

        .account-toggle-btn.active {
            background-color: white;
            color: var(--secondary);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Enhanced Dashboard Styles */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .dashboard-tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid #eee;
            overflow-x: auto;
        }

        .dashboard-tab {
            padding: 12px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: var(--gray);
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .dashboard-tab.active {
            color: var(--secondary);
            border-bottom-color: var(--secondary);
        }

        .dashboard-tab:hover:not(.active) {
            color: var(--dark);
        }

        .dashboard-tab-content {
            display: none;
        }

        .dashboard-tab-content.active {
            display: block;
        }

        /* Profile Info Styles */
        .profile-info {
            margin-bottom: 25px;
        }

        .info-item {
            display: flex;
            margin-bottom: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .info-label {
            font-weight: 600;
            width: 150px;
            color: var(--dark);
        }

        /* Orders Styles */
        .orders-list {
            min-height: 200px;
        }

        .order-item {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary);
            transition: transform 0.3s;
        }

        .order-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .order-id {
            font-weight: 600;
            color: var(--secondary);
        }

        .order-date {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .order-status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-pending {
            background-color: var(--warning);
            color: var(--dark);
        }

        .status-completed {
            background-color: var(--success);
            color: white;
        }

        .status-cancelled {
            background-color: var(--danger);
            color: white;
        }

        .order-products {
            margin-top: 10px;
        }

        .order-product {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .order-total {
            text-align: right;
            margin-top: 10px;
            font-weight: 600;
            color: var(--secondary);
        }

        .no-orders, .no-wishlist {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
            font-style: italic;
        }

        /* Wishlist Styles */
        .wishlist-items {
            min-height: 200px;
        }

        .wishlist-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s;
        }

        .wishlist-item:hover {
            background-color: #f9f9f9;
        }

        .wishlist-item-img {
            width: 60px;
            height: 60px;
            background-color: #f8f8f8;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            color: var(--secondary);
            font-size: 1.5rem;
        }

        .wishlist-item-info {
            flex: 1;
        }

        .wishlist-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .wishlist-item-price {
            color: var(--secondary);
            font-weight: 600;
        }

        .wishlist-item-actions {
            display: flex;
            gap: 10px;
        }

        /* Settings Styles */
        .settings-options {
            margin-bottom: 25px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .setting-item label {
            font-weight: 500;
        }

        .setting-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--secondary);
        }

        /* Enhanced Login Button */
        #login-btn, #register-btn, #save-profile-btn, #save-settings {
            width: 100%;
            padding: 14px;
            background: linear-gradient(to right, var(--secondary), var(--electric-blue));
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(0, 51, 160, 0.2);
        }

        #login-btn:hover, #register-btn:hover, #save-profile-btn:hover, #save-settings:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 51, 160, 0.3);
        }

        /* Add Account Icon to Header */
        .account-icon {
            position: relative;
            font-size: 1.3rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
            margin-right: 10px;
            color: white;
        }

        .account-icon:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        /* Animation for electric effect */
        @keyframes electricPulse {
            0% { text-shadow: 0 0 5px var(--electric-blue); }
            50% { text-shadow: 0 0 20px var(--electric-yellow), 0 0 30px var(--electric-blue); }
            100% { text-shadow: 0 0 5px var(--electric-blue); }
        }
        
        .electric-text {
            animation: electricPulse 2s infinite;
        }
        
        /* Budget Estimation Styles */
        .budget-estimation {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .budget-slider {
            width: 100%;
            margin: 10px 0;
        }
        
        .budget-value {
            font-size: 1.2rem;
            font-weight: 600;
            text-align: center;
            margin-top: 10px;
            color: var(--primary);
        }
        
        /* Enhanced Responsive Design for Cameras */
        @media (max-width: 768px) {
            #camera-preview, #video-recorder {
                height: 250px;
            }
            
            .camera-controls, .video-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .camera-controls .btn, .video-controls .btn {
                width: 100%;
                max-width: 200px;
            }
        }
        
        @media (max-width: 480px) {
            #camera-preview, #video-recorder {
                height: 200px;
            }
            
            .camera-switch, .video-switch {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
        }
        
        /* Admin Dashboard Styles */
        .admin-dashboard {
            padding: 30px 0;
            display: none;
        }
        
        .products-management, .add-product-form, .media-management, .problem-solver-management, .settings-management, .quotations-management, .services-management {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .products-list {
            margin-top: 20px;
        }
        
        .product-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s;
        }
        
        .product-item:hover {
            background-color: #f9f9f9;
        }
        
        .product-item-img {
            width: 60px;
            height: 60px;
            background-color: #f8f8f8;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            color: var(--secondary);
            font-size: 1.5rem;
            overflow: hidden;
        }
        
        .product-item-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-item-info {
            flex: 1;
        }
        
        .product-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .product-item-price {
            color: var(--secondary);
            font-weight: 600;
        }
        
        .product-item-status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .status-in-stock {
            background-color: var(--success);
            color: white;
        }
        
        .status-out-of-stock {
            background-color: var(--danger);
            color: white;
        }
        
        .product-item-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-small {
            padding: 8px 12px;
            font-size: 0.85rem;
            width: auto;
        }
        
        .btn-danger {
            background: linear-gradient(to right, var(--danger), #c82333);
        }
        
        .btn-success {
            background: linear-gradient(to right, var(--success), #218838);
        }
        
        .btn-warning {
            background: linear-gradient(to right, var(--warning), #e0a800);
        }
        
        /* Image Upload Styles */
        .image-upload-container {
            border: 2px dashed #e1e5ee;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        
        .image-upload-container:hover {
            border-color: var(--secondary);
        }
        
        .image-upload-container i {
            font-size: 3rem;
            color: var(--gray);
            margin-bottom: 10px;
        }
        
        .image-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .preview-item {
            position: relative;
            width: 100px;
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .preview-item .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        /* Problem Solver Styles */
        .problem-list {
            margin-top: 20px;
        }
        
        .problem-item {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid var(--info);
            background-color: #f8f9fa;
            transition: all 0.3s;
        }
        
        .problem-item.urgent {
            border-left-color: var(--danger);
            background-color: #ffe6e6;
            animation: pulse-red 2s infinite;
        }
        
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(220, 53, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
        }
        
        .problem-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .problem-name {
            font-weight: 600;
        }
        
        .problem-date {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .problem-type {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 10px;
            background-color: var(--info);
            color: white;
        }
        
        .problem-media {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .media-item {
            width: 150px;
            height: 150px;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            border: 2px solid #e1e5ee;
            cursor: pointer;
        }
        
        .media-item img, .media-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .media-item.fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3000;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .media-item.fullscreen img,
        .media-item.fullscreen video {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }
        
        .media-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 3001;
        }
        
        .problem-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        /* Chat Modal */
        .chat-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .chat-modal-content {
            background-color: white;
            width: 90%;
            max-width: 500px;
            border-radius: 10px;
            padding: 30px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .chat-container {
            height: 300px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background-color: #f9f9f9;
        }
        
        .chat-message {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            max-width: 80%;
        }
        
        .chat-message.admin {
            background-color: var(--secondary);
            color: white;
            margin-left: auto;
        }
        
        .chat-message.customer {
            background-color: #e9ecef;
            color: var(--dark);
        }
        
        .chat-input {
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        
        /* Orders Management */
        .admin-orders-list {
            min-height: 200px;
        }
        
        .admin-order-item {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary);
            transition: transform 0.3s;
        }
        
        .admin-order-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .admin-order-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .admin-order-id {
            font-weight: 600;
            color: var(--secondary);
        }
        
        .admin-order-date {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .admin-order-status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .admin-order-products {
            margin-top: 10px;
        }
        
        .admin-order-product {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .admin-order-total {
            text-align: right;
            margin-top: 10px;
            font-weight: 600;
            color: var(--secondary);
        }
        
        .no-admin-orders, .no-problems, .no-quotations {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
            font-style: italic;
        }
        
        /* Analytics Cards */
        .analytics-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .analytics-card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 20px;
            text-align: center;
        }
        
        .analytics-card h4 {
            margin-bottom: 10px;
            color: var(--gray);
            font-size: 1rem;
        }
        
        .analytics-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary);
        }
        
        /* Password Toggle */
        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
        }
        
        .form-group.password-group {
            position: relative;
        }
        
        .form-group.password-group input {
            padding-right: 50px;
        }
        
        /* Reset Password Modal */
        .reset-password-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .reset-password-content {
            background-color: white;
            width: 90%;
            max-width: 450px;
            border-radius: 10px;
            padding: 30px;
            position: relative;
        }
        
        .verification-code {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        
        .verification-code input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            border: 2px solid #e1e5ee;
            border-radius: 8px;
        }
        
        .verification-code input:focus {
            border-color: var(--secondary);
            outline: none;
        }
        
        /* Make admin inputs visible */
        .admin-dashboard input,
        .admin-dashboard textarea,
        .admin-dashboard select {
            background-color: white !important;
            color: var(--dark) !important;
            border: 2px solid #e1e5ee !important;
        }

        .admin-dashboard input:focus,
        .admin-dashboard textarea:focus,
        .admin-dashboard select:focus {
            border-color: var(--secondary) !important;
            box-shadow: 0 0 0 3px rgba(0, 51, 160, 0.1) !important;
        }
        
        /* OTP Verification Section */
        #otp-verification-section {
            margin-top: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #e1e5ee;
        }
        
        /* RESPONSIVE DESIGN */
        @media (max-width: 1024px) {
            .search-box {
                width: 300px;
            }
            
            .logo {
                min-width: 160px;
            }
            
            .logo h1 {
                font-size: 1.6rem;
            }
        }

        @media (max-width: 768px) {
            .mobile-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .search-box {
                width: 200px;
                margin-right: 5px;
            }
            
            .header-right {
                gap: 10px;
            }
            
            .logo {
                min-width: 140px;
            }
            
            .logo h1 {
                font-size: 1.4rem;
            }
            
            .logo-slogan {
                font-size: 0.75rem;
            }
            
            .logo-img {
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
            }
            
            .cart-icon {
                margin-right: 5px;
                font-size: 1.2rem;
            }
            
            .nav-links {
                display: none;
            }
            
            .mobile-menu {
                display: block;
            }
            
            .hero h2 {
                font-size: 2.2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .products-grid, .services-grid {
                grid-template-columns: 1fr;
            }
            
            .product-detail, .service-detail {
                flex-direction: column;
            }
            
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .dashboard-tabs {
                flex-wrap: wrap;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .product-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .product-item-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .order-header {
                flex-direction: column;
                gap: 5px;
            }
            
            .problem-header {
                flex-direction: column;
                gap: 5px;
            }
        }

        @media (max-width: 640px) {
            .header-content {
                gap: 15px;
            }
            
            .search-box {
                width: 150px;
            }
            
            .logo {
                min-width: 120px;
            }
            
            .logo h1 {
                font-size: 1.3rem;
            }
            
            .logo-slogan {
                display: none;
            }
            
            .logo-img {
                width: 40px;
                height: 40px;
                font-size: 1rem;
                margin-right: 8px;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 0.9rem;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }

        @media (max-width: 480px) {
            .header-content {
                gap: 10px;
            }
            
            .search-box {
                width: 120px;
            }
            
            .search-box input {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .logo {
                min-width: auto;
                flex: 1;
            }
            
            .logo h1 {
                font-size: 1.2rem;
            }
            
            .header-right {
                gap: 8px;
            }
            
            .cart-icon {
                margin-right: 3px;
                padding: 6px;
                font-size: 1.1rem;
            }
            
            .mobile-toggle {
                width: 36px;
                height: 36px;
                font-size: 1.1rem;
                margin-right: 5px;
            }
            
            .hero h2 {
                font-size: 1.8rem;
            }
            
            .hero p {
                font-size: 0.9rem;
            }
            
            .section-title {
                font-size: 1.6rem;
            }
        }

        @media (max-width: 360px) {
            .search-box {
                width: 100px;
            }
            
            .search-box input {
                padding: 8px 12px;
                font-size: 0.85rem;
            }
            
            .logo h1 {
                font-size: 1.1rem;
            }
            
            .logo-img {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
                margin-right: 5px;
            }
            
            .header-right {
                gap: 5px;
            }
            
            .cart-icon {
                margin-right: 2px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-img">IPS</div>
                    <div class="logo-text">
                        <h1>Iggy Power Solutions</h1>
                        <div class="logo-slogan">Powering Your World with Reliable Energy Solutions</div>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="search-box">
                        <input type="text" id="search-input" placeholder="Search products, services...">
                        <i class="fas fa-search"></i>
                        <div class="search-results" id="search-results"></div>
                    </div>
                    
                    <!-- Account Icon -->
                    <div class="account-icon" id="account-icon">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    
                    <div class="cart-icon" id="cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">0</span>
                    </div>
                    <!-- Add this after cart icon and before mobile toggle -->
<div class="wishlist-icon" id="wishlist-icon">
    <i class="fas fa-heart"></i>
    <span class="wishlist-count">0</span>
</div>
                    <button class="mobile-toggle" id="mobile-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav>
        <div class="container">
            <ul class="nav-links" id="nav-links">
                <li><a href="#home"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="#products"><i class="fas fa-box"></i> Products</a></li>
                <li><a href="#services"><i class="fas fa-tools"></i> Services</a></li>
                <li><a href="#account"><i class="fas fa-user"></i> My Account</a></li>
                <li><a href="#gallery"><i class="fas fa-images"></i> Gallery</a></li>
                <li><a href="#problem-solver"><i class="fas fa-bolt"></i> Problem Solver</a></li>
                <li><a href="#quotation"><i class="fas fa-file-invoice-dollar"></i> Quotation</a></li>
                <li><a href="#contact"><i class="fas fa-phone-alt"></i> Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobile-menu">
        <div class="mobile-menu-header">
            <div class="mobile-menu-logo">
                <i class="fas fa-bolt"></i>
                <span>Iggy Power Solutions</span>
            </div>
            <button class="close-menu" id="close-menu">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <ul class="mobile-nav-links">
            <li><a href="#home"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="#products"><i class="fas fa-box"></i> Products</a></li>
            <li><a href="#services"><i class="fas fa-tools"></i> Services</a></li>
            <li><a href="#gallery"><i class="fas fa-images"></i> Gallery</a></li>
            <li><a href="#problem-solver"><i class="fas fa-bolt"></i> Problem Solver</a></li>
            <li><a href="#quotation"><i class="fas fa-file-invoice-dollar"></i> Quotation</a></li>
            <li><a href="#contact"><i class="fas fa-phone-alt"></i> Contact</a></li>
        </ul>
    </div>

    <!-- Notification Toast - Positioned top left -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Item added to cart</span>
    </div>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <h2>Powering Your World with <span class="electric-text">Reliable Energy</span></h2>
                <p>Your trusted partner for quality electrical products, expert services, and innovative power solutions for residential and commercial needs.</p>
                <a href="#products" class="btn">Explore Products</a>
                <a href="#services" class="btn btn-secondary">Our Services</a>
                
                <div class="hero-features">
                    <div class="hero-feature">
                        <i class="fas fa-bolt"></i>
                        <span>Quality Products</span>
                    </div>
                    <div class="hero-feature">
                        <i class="fas fa-tools"></i>
                        <span>Expert Services</span>
                    </div>
                    <div class="hero-feature">
                        <i class="fas fa-shield-alt"></i>
                        <span>Safety First</span>
                    </div>
                    <div class="hero-feature">
                        <i class="fas fa-headset"></i>
                        <span>24/7 Support</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products">
        <div class="container">
            <h2 class="section-title">Our Products</h2>
            
            <div class="categories">
                <button class="category-btn active" data-category="all">All Products</button>
                <button class="category-btn" data-category="solar">Solar Products</button>
                <button class="category-btn" data-category="inverter">Inverters</button>
                <button class="category-btn" data-category="battery">Batteries</button>
                <button class="category-btn" data-category="accessories">Accessories</button>
            </div>
            
            <div class="products-grid" id="products-grid">
                <!-- Products will be dynamically loaded from admin data -->
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services" id="services">
        <div class="container">
            <h2 class="section-title" style="color: white;">Our Services</h2>
            
            <div class="services-grid">
                <!-- Services will be dynamically loaded from admin data -->
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section class="gallery" id="gallery">
        <div class="container">
            <h2 class="section-title">Our Gallery</h2>
            
            <div class="gallery-tabs">
                <button class="gallery-tab active" data-tab="images">Images</button>
                <button class="gallery-tab" data-tab="videos">Videos</button>
                <button class="gallery-tab" data-tab="projects">Projects</button>
            </div>
            
            <div class="gallery-content active" id="images-tab">
                <div class="gallery-grid" id="gallery-grid">
                    <!-- Gallery images will be dynamically loaded from admin data -->
                </div>
            </div>
            
            <div class="gallery-content" id="videos-tab">
                <div class="gallery-grid">
                    <!-- Video 1 -->
                    <div class="gallery-item">
                        <video controls>
                            <source src="#" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                        <div class="gallery-overlay">
                            <h3>Solar Installation Process</h3>
                            <p>Step-by-step guide to our installation process</p>
                        </div>
                    </div>
                    
                    <!-- Video 2 -->
                    <div class="gallery-item">
                        <video controls>
                            <source src="#" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                        <div class="gallery-overlay">
                            <h3>Product Overview</h3>
                            <p>Detailed look at our latest products</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="gallery-content" id="projects-tab">
                <div class="gallery-grid">
                    <!-- Project 1 -->
                    <div class="gallery-item">
                        <img src="https://via.placeholder.com/300x200/0033A0/FFFFFF?text=Commercial+Project" alt="Commercial Project">
                        <div class="gallery-overlay">
                            <h3>Commercial Solar Project</h3>
                            <p>50kW solar installation for business</p>
                        </div>
                    </div>
                    
                    <!-- Project 2 -->
                    <div class="gallery-item">
                        <img src="https://via.placeholder.com/300x200/0033A0/FFFFFF?text=Residential+Project" alt="Residential Project">
                        <div class="gallery-overlay">
                            <h3>Residential Backup System</h3>
                            <p>Complete home power backup solution</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Problem Solver Section -->
    <section class="problem-solver" id="problem-solver">
        <div class="container">
            <h2 class="section-title" style="color: white;">Electrical Problem Solver</h2>
            <p style="text-align: center; margin-bottom: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
                Having electrical issues? Let us help! Describe your problem, and our experts will provide solutions.
            </p>
            
            <form class="problem-form" id="problem-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="problem-name">Your Name</label>
                        <input type="text" id="problem-name" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="problem-phone">Phone Number</label>
                        <input type="tel" id="problem-phone" placeholder="Enter your phone number" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="problem-type">Problem Type</label>
                    <div class="custom-dropdown">
                        <select id="problem-type" required>
                            <option value="">Select problem type</option>
                            <option value="power-outage">Power Outage</option>
                            <option value="flickering-lights">Flickering Lights</option>
                            <option value="tripping-breaker">Tripping Circuit Breaker</option>
                            <option value="socket-issues">Socket/Outlet Issues</option>
                            <option value="appliance-failure">Appliance Not Working</option>
                            <option value="solar-issues">Solar System Problems</option>
                            <option value="inverter-issues">Inverter/Battery Issues</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="other-input" id="other-problem-input">
                        <input type="text" placeholder="Please describe your problem">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="problem-description">Problem Description</label>
                    <textarea id="problem-description" placeholder="Please describe your problem in detail..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label>Upload Photos (Optional)</label>
                    <div class="camera-container">
                        <div id="camera-preview">
                            <video id="video" autoplay></video>
                            <canvas id="canvas" style="display: none;"></canvas>
                            <button type="button" class="camera-switch" id="camera-switch">
                                <i class="fas fa-camera-retro"></i>
                            </button>
                        </div>
                        <div class="captured-media-container">
                            <img id="captured-image" alt="Captured Image">
                            <div class="media-actions" id="photo-actions" style="display: none;">
                                <button type="button" class="discard-btn" id="discard-photo">
                                    <i class="fas fa-trash"></i> Discard
                                </button>
                            </div>
                        </div>
                        <div class="camera-controls">
                            <button type="button" id="start-camera" class="btn"><i class="fas fa-camera"></i> Start Camera</button>
                            <button type="button" id="capture" class="btn btn-secondary" style="display: none;"><i class="fas fa-camera-retro"></i> Capture</button>
                            <button type="button" id="retake" class="btn" style="display: none;"><i class="fas fa-redo"></i> Retake</button>
                        </div>
                        <p>Or upload existing photos:</p>
                        <input type="file" id="photo-upload" accept="image/*">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Upload Video (Optional)</label>
                    <div class="camera-container">
                        <div id="video-recorder">
                            <video id="video-preview" controls style="display: none;"></video>
                            <div id="video-recording-message" style="display: none; text-align: center; padding: 20px;">
                                <i class="fas fa-video fa-2x"></i>
                                <p>Recording in progress...</p>
                            </div>
                            <button type="button" class="video-switch" id="video-switch">
                                <i class="fas fa-camera-retro"></i>
                            </button>
                        </div>
                        <div class="captured-media-container">
                            <video id="recorded-video" controls style="display: none;"></video>
                            <div class="media-actions" id="video-actions" style="display: none;">
                                <button type="button" class="discard-btn" id="discard-video">
                                    <i class="fas fa-trash"></i> Discard
                                </button>
                            </div>
                        </div>
                        <div class="video-controls">
                            <button type="button" id="start-video" class="btn"><i class="fas fa-video"></i> Start Recording</button>
                            <button type="button" id="stop-video" class="btn btn-secondary" style="display: none;"><i class="fas fa-stop"></i> Stop Recording</button>
                        </div>
                        <p>Or upload existing videos:</p>
                        <input type="file" id="video-upload" accept="video/*">
                    </div>
                </div>
                <!-- Add this after the video upload section and before next-of-kin -->
<!-- Voice Recording Section -->
<div class="form-group">
    <label>Record Voice Note (Optional)</label>
    <div class="voice-recorder-container">
        <div id="voice-recorder">
            <div id="voice-recording-indicator" style="display: none; text-align: center; padding: 20px;">
                <i class="fas fa-microphone fa-2x" style="color: red;"></i>
                <p>Recording voice note...</p>
                <div id="recording-timer">00:00</div>
            </div>
        </div>
        <div class="voice-controls">
            <button type="button" id="start-voice-recording" class="btn"><i class="fas fa-microphone"></i> Start Recording</button>
            <button type="button" id="stop-voice-recording" class="btn btn-secondary" style="display: none;"><i class="fas fa-stop"></i> Stop Recording</button>
            <button type="button" id="play-voice-recording" class="btn" style="display: none;"><i class="fas fa-play"></i> Play Recording</button>
        </div>
        <audio id="recorded-audio" controls style="display: none;"></audio>
    </div>
</div>
                
                <div class="form-group">
                    <label for="next-of-kin">Next of Kin Contact (Optional)</label>
                    <input type="text" id="next-of-kin" placeholder="Name and phone number of next of kin">
                </div>
                
               <!-- Replace the single button with these two buttons -->
<div class="form-actions">
    <button type="button" class="btn btn-whatsapp" id="submit-problem"><i class="fab fa-whatsapp"></i> Send via WhatsApp</button>
    <button type="button" class="btn btn-secondary" id="chat-with-admin"><i class="fas fa-comments"></i> Chat with Admin</button>
</div>
            </form>
        </div>
    </section>

    <!-- Quotation Section -->
    <section class="quotation" id="quotation">
        <div class="container">
            <h2 class="section-title" style="color: white;">Request a Quotation</h2>
            <p style="text-align: center; margin-bottom: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
                Get a customized quote for our products or services. Fill out the form below and we'll get back to you within 24 hours.
            </p>
            
            <form class="quotation-form" id="quotation-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="quote-name">Full Name</label>
                        <input type="text" id="quote-name" placeholder="Your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="quote-email">Email Address</label>
                        <input type="email" id="quote-email" placeholder="Your email address" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="quote-phone">Phone Number</label>
                        <input type="tel" id="quote-phone" placeholder="Your phone number" required>
                    </div>
                    <div class="form-group">
                        <label for="quote-location">Location</label>
                        <input type="text" id="quote-location" placeholder="Your location" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="quote-type">Service/Product Type</label>
                    <div class="custom-dropdown">
                        <select id="quote-type" required>
                            <option value="">Select service or product</option>
                            <option value="solar-installation">Solar Installation</option>
                            <option value="electrical-maintenance">Electrical Maintenance</option>
                            <option value="inverter-repair">Inverter Repair</option>
                            <option value="home-electrification">Home Electrification</option>
                            <option value="commercial-solutions">Commercial Solutions</option>
                            <option value="emergency-services">Emergency Services</option>
                            <option value="backup-power">Backup Power Installation</option>
                            <option value="ev-charging">EV Charging Station</option>
                            <option value="solar-panel">Solar Panel</option>
                            <option value="inverter">Inverter</option>
                            <option value="battery">Battery</option>
                            <option value="accessories">Accessories</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="other-input" id="other-quote-input">
                        <input type="text" placeholder="Please specify the service or product">
                    </div>
                </div>
                
                <!-- Budget Estimation Section -->
                <div class="budget-estimation">
                    <h3>Budget Estimation</h3>
                    <p>Use the slider below to indicate your estimated budget range:</p>
                    <input type="range" min="5000" max="1000000" value="100000" class="budget-slider" id="budget-slider">
                    <div class="budget-value" id="budget-value">KSh 100,000</div>
                </div>
                
                <div class="form-group">
                    <label for="quote-timeline">Project Timeline (Optional)</label>
                    <div class="custom-dropdown">
                        <select id="quote-timeline">
                            <option value="">Select timeline</option>
                            <option value="urgent">Urgent (Within 1 week)</option>
                            <option value="1-2-weeks">1-2 Weeks</option>
                            <option value="2-4-weeks">2-4 Weeks</option>
                            <option value="1-2-months">1-2 Months</option>
                            <option value="flexible">Flexible</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="quote-details">Project Details</label>
                    <textarea id="quote-details" placeholder="Please describe your requirements in detail..." required></textarea>
                </div>
                
                <button type="button" class="btn btn-whatsapp" id="submit-quote"><i class="fab fa-whatsapp"></i> Submit via WhatsApp</button>
            </form>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="container">
            <h2 class="section-title" style="color: white;">Contact Us</h2>
            
            <div class="contact-grid">
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Our Location</h3>
                            <p>123 Energy Street, Power City, PC 12345</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone-alt"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Phone Number</h3>
                            <p>254111923477</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Email Address</h3>
                            <p>iggysystems@gmail.com</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Business Hours</h3>
                            <p>Monday - Friday: 8:00 AM - 6:00 PM</p>
                            <p>Saturday: 9:00 AM - 2:00 PM</p>
                        </div>
                    </div>
                    
                    <div class="contact-buttons">
                        <a href="tel:254111923477" class="btn"><i class="fas fa-phone-alt"></i> Call Now</a>
                        <a href="mailto:iggysystems@gmail.com" class="btn btn-secondary"><i class="fas fa-envelope"></i> Send Email</a>
                        <a href="https://wa.me/254111923477" class="btn btn-whatsapp" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a>
                    </div>
                    
                    <!-- Developer Contact Section -->
                    <div class="developer-contact">
                        <h3>Developer Contact</h3>
                        <p>For technical issues with the website</p>
                        
                        <div class="developer-contact-info">
                            <div class="developer-contact-item">
                                <i class="fas fa-phone"></i>
                                <span>+254110554040</span>
                            </div>
                            <div class="developer-contact-item">
                                <i class="fas fa-envelope"></i>
                                <span>dariusmomanyi678@gmail.com</span>
                            </div>
                        </div>
                        
                        <div class="developer-buttons">
                            <a href="tel:+254110554040" class="btn"><i class="fas fa-phone"></i> Call Developer</a>
                            <a href="https://wa.me/+254110554040?text=Hi%20Iggy%20Power%20Developer,%20I%20have%20a%20technical%20issue%20with%20the%20website" class="btn btn-whatsapp" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp Developer</a>
                            <a href="mailto:dariusmomanyi678@gmail.com?subject=Website%20Technical%20Issue&body=Hello%20Developer,%0A%0AI%20am%20experiencing%20the%20following%20issue%20with%20the%20website:" class="btn btn-secondary"><i class="fas fa-envelope"></i> Email Developer</a>
                        </div>
                    </div>
                </div>
                
                <div class="contact-form">
                    <h3>Send Us a Message</h3>
                    <form id="contact-form">
                        <div class="form-group">
                            <label for="contact-name">Your Name</label>
                            <input type="text" id="contact-name" placeholder="Your name">
                        </div>
                        
                        <div class="form-group">
                            <label for="contact-email">Your Email</label>
                            <input type="email" id="contact-email" placeholder="Your email">
                        </div>
                        
                        <div class="form-group">
                            <label for="contact-subject">Subject</label>
                            <input type="text" id="contact-subject" placeholder="Subject">
                        </div>
                        
                        <div class="form-group">
                            <label for="contact-message">Message</label>
                            <textarea id="contact-message" placeholder="Your message..."></textarea>
                        </div>
                        
                        <button type="button" class="btn btn-whatsapp" id="submit-contact"><i class="fab fa-whatsapp"></i> Send via WhatsApp</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Account Section -->
    <section class="account" id="account">
        <div class="container">
            <div class="account-container">
                <!-- Account Toggle -->
                <div class="account-toggle">
                    <button class="account-toggle-btn active" id="login-toggle">Login</button>
                    <button class="account-toggle-btn" id="register-toggle">Register</button>
                </div>
                
                <!-- Login Form -->
                <div class="account-form" id="login-form">
                    <h3>Welcome Back</h3>
                    <div class="form-group password-group">
                        <label for="login-email">Email Address</label>
                        <input type="email" id="login-email" placeholder="Enter your email address" required>
                    </div>
                    <div class="form-group password-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" placeholder="Enter your password" required>
                        <button type="button" class="password-toggle" id="toggle-login-password">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" id="login-btn">Login to Account</button>
                        <p><a href="#" id="forgot-password">Forgot Password?</a></p>
                        <p>Don't have an account? <a href="#" id="show-register">Create one here</a></p>
                    </div>
                </div>
                
                <!-- Registration Form -->
                <div class="account-form" id="register-form" style="display: none;">
                    <h3>Create Account</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="register-firstname">First Name</label>
                            <input type="text" id="register-firstname" placeholder="First name" required>
                        </div>
                        <div class="form-group">
                            <label for="register-lastname">Last Name</label>
                            <input type="text" id="register-lastname" placeholder="Last name" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="register-email">Email Address</label>
                        <input type="email" id="register-email" placeholder="Enter your email address" required>
                    </div>
                    <div class="form-group">
                        <label for="register-phone">Phone Number</label>
                        <input type="tel" id="register-phone" placeholder="Enter your phone number">
                    </div>
                    <div class="form-group password-group">
                        <label for="register-password">Password</label>
                        <input type="password" id="register-password" placeholder="Create a password (min. 6 characters)" required>
                        <button type="button" class="password-toggle" id="toggle-register-password">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-group password-group">
                        <label for="register-confirm-password">Confirm Password</label>
                        <input type="password" id="register-confirm-password" placeholder="Confirm your password" required>
                        <button type="button" class="password-toggle" id="toggle-confirm-password">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" id="register-btn">Create Account</button>
                        <p>Already have an account? <a href="#" id="show-login">Login here</a></p>
                    </div>
                </div>
                
                <!-- Account Dashboard (shown after login) -->
                <div class="account-dashboard" id="account-dashboard" style="display: none;">
                    <div class="dashboard-header">
                        <h3>Welcome, <span id="user-name">User</span>!</h3>
                        <button class="btn btn-secondary" id="logout-btn">Logout</button>
                    </div>
                    
                    <div class="dashboard-tabs">
                        <button class="dashboard-tab active" data-tab="profile">Profile</button>
                        <button class="dashboard-tab" data-tab="orders">My Orders</button>
                        <button class="dashboard-tab" data-tab="wishlist">Wishlist</button>
                        <button class="dashboard-tab" data-tab="settings">Settings</button>
                    </div>
                    
                    <div class="dashboard-content">
                        <!-- Profile Tab -->
                        <div class="dashboard-tab-content active" id="profile-tab">
                            <h4>Personal Information</h4>
                            <div class="profile-info">
                                <div class="info-item">
                                    <span class="info-label">Full Name:</span>
                                    <span id="profile-fullname">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Email:</span>
                                    <span id="profile-email">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Phone:</span>
                                    <span id="profile-phone">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Member Since:</span>
                                    <span id="profile-joindate">-</span>
                                </div>
                            </div>
                            <button class="btn" id="edit-profile-btn">Edit Profile</button>
                        </div>
                        
                        <!-- Orders Tab -->
                        <div class="dashboard-tab-content" id="orders-tab">
                            <h4>Order History</h4>
                            <div class="orders-list" id="orders-list">
                                <p class="no-orders">You haven't placed any orders yet.</p>
                            </div>
                        </div>
                        
                        <!-- Wishlist Tab -->
                        <div class="dashboard-tab-content" id="wishlist-tab">
                            <h4>My Wishlist</h4>
                            <div class="wishlist-items" id="wishlist-items">
                                <p class="no-wishlist">Your wishlist is empty.</p>
                            </div>
                        </div>
                        
                        <!-- Settings Tab -->
                        <div class="dashboard-tab-content" id="settings-tab">
                            <h4>Account Settings</h4>
                            <div class="settings-options">
                                <div class="setting-item">
                                    <label for="email-notifications">Email Notifications</label>
                                    <input type="checkbox" id="email-notifications" checked>
                                </div>
                                <div class="setting-item">
                                    <label for="sms-notifications">SMS Notifications</label>
                                    <input type="checkbox" id="sms-notifications">
                                </div>
                                <div class="setting-item">
                                    <label for="newsletter">Subscribe to Newsletter</label>
                                    <input type="checkbox" id="newsletter" checked>
                                </div>
                            </div>
                            <button class="btn" id="save-settings">Save Settings</button>
                        </div>
                    </div>
                </div>
                
                <!-- Admin Dashboard (shown after admin login) -->
                <div class="admin-dashboard" id="admin-dashboard" style="display: none;">
                    <div class="dashboard-header">
                        <h2>Admin Dashboard</h2>
                        <button class="btn btn-danger" id="admin-logout-btn">Logout</button>
                    </div>
                    
                    <div class="dashboard-tabs">
                        <button class="dashboard-tab active" data-tab="products">Product Management</button>
                        <button class="dashboard-tab" data-tab="services">Service Management</button>
                        <button class="dashboard-tab" data-tab="media">Media Management</button>
                        <button class="dashboard-tab" data-tab="problems">Problem Solver</button>
                        <button class="dashboard-tab" data-tab="quotations">Quotation Management</button>
                        <button class="dashboard-tab" data-tab="orders">Order Management</button>
                        <button class="dashboard-tab" data-tab="analytics">Analytics</button>
                        <button class="dashboard-tab" data-tab="settings">Settings</button>
                    </div>
                    
                    <div class="dashboard-content">
                        <!-- Products Management Tab -->
                        <div class="dashboard-tab-content active" id="admin-products-tab">
                            <div class="add-product-form">
                                <h3 id="product-form-title">Add New Product</h3>
                                <form id="product-form">
                                    <input type="hidden" id="edit-product-id">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="product-name">Product Name</label>
                                            <input type="text" id="product-name" placeholder="Enter product name" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="product-price">Price (KSh)</label>
                                            <input type="number" id="product-price" placeholder="Enter product price" required>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="product-category">Category</label>
                                            <select id="product-category" required>
                                                <option value="">Select category</option>
                                                <option value="solar">Solar Products</option>
                                                <option value="inverter">Inverters</option>
                                                <option value="battery">Batteries</option>
                                                <option value="accessories">Accessories</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="product-status">Stock Status</label>
                                            <select id="product-status" required>
                                                <option value="in-stock">In Stock</option>
                                                <option value="out-of-stock">Out of Stock</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="product-description">Description</label>
                                        <textarea id="product-description" placeholder="Enter product description" required></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="product-specs">Specifications (one per line)</label>
                                        <textarea id="product-specs" placeholder="Enter product specifications"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label>Product Image</label>
                                        <div class="image-upload-container" id="product-image-upload">
                                            <i class="fas fa-cloud-upload-alt"></i>
                                            <p>Click to upload or drag and drop</p>
                                            <input type="file" id="product-image" accept="image/*" style="display: none;">
                                            <div class="image-preview" id="product-image-preview"></div>
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" class="btn" id="save-product-btn">Add Product</button>
                                        <button type="button" class="btn btn-warning" id="cancel-edit-btn" style="display: none; margin-top: 10px;">Cancel Edit</button>
                                    </div>
                                </form>
                            </div>
                            
                            <div class="products-management">
                                <h3>Manage Products</h3>
                                <div class="products-list" id="admin-products-list">
                                    <!-- Products will be dynamically added here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Service Management Tab -->
                        <div class="dashboard-tab-content" id="admin-services-tab">
                            <div class="add-service-form">
                                <h3 id="service-form-title">Add New Service</h3>
                                <form id="service-form">
                                    <input type="hidden" id="edit-service-id">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="service-name">Service Name</label>
                                            <input type="text" id="service-name" placeholder="Enter service name" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="service-price">Price (KSh)</label>
                                            <input type="text" id="service-price" placeholder="Enter service price" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="service-description">Description</label>
                                        <textarea id="service-description" placeholder="Enter service description" required></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="service-features">Features (one per line)</label>
                                        <textarea id="service-features" placeholder="Enter service features"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="service-icon">Icon Class (Font Awesome)</label>
                                        <input type="text" id="service-icon" placeholder="fas fa-icon-name" required>
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" class="btn" id="save-service-btn">Add Service</button>
                                        <button type="button" class="btn btn-warning" id="cancel-service-edit-btn" style="display: none; margin-top: 10px;">Cancel Edit</button>
                                    </div>
                                </form>
                            </div>
                            
                            <div class="services-management">
                                <h3>Manage Services</h3>
                                <div class="services-list" id="admin-services-list">
                                    <!-- Services will be dynamically added here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Media Management Tab -->
                        <div class="dashboard-tab-content" id="admin-media-tab">
                            <div class="media-management">
                                <h3>Gallery Management</h3>
                                <div class="form-group">
                                    <label>Upload Gallery Images</label>
                                    <div class="image-upload-container" id="gallery-upload">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Click to upload or drag and drop multiple images</p>
                                        <input type="file" id="gallery-images" accept="image/*" multiple style="display: none;">
                                        <div class="image-preview" id="gallery-preview"></div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn" id="upload-gallery-btn">Upload to Gallery</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Problem Solver Tab -->
                        <div class="dashboard-tab-content" id="admin-problems-tab">
                            <div class="problem-solver-management">
                                <h3>Problem Solver Reports</h3>
                                <div class="problem-list" id="admin-problem-list">
                                    <!-- Problem reports will be dynamically added here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quotation Management Tab -->
                        <div class="dashboard-tab-content" id="admin-quotations-tab">
                            <div class="quotations-management">
                                <h3>Quotation Requests</h3>
                                <div class="quotation-list" id="admin-quotation-list">
                                    <p class="no-quotations">No quotation requests found.</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Orders Management Tab -->
                        <div class="dashboard-tab-content" id="admin-orders-tab">
                            <h3>Order Management</h3>
                            <div class="admin-orders-list" id="admin-orders-list">
                                <p class="no-admin-orders">No orders found.</p>
                            </div>
                        </div>
                        
                        <!-- Analytics Tab -->
                        <div class="dashboard-tab-content" id="admin-analytics-tab">
                            <h3>Sales Analytics</h3>
                            <div class="analytics-content">
                                <div class="analytics-cards">
                                    <div class="analytics-card">
                                        <h4>Total Revenue</h4>
                                        <p class="analytics-value" id="total-revenue">KSh 0</p>
                                    </div>
                                    <div class="analytics-card">
                                        <h4>Total Orders</h4>
                                        <p class="analytics-value" id="total-orders">0</p>
                                    </div>
                                    <div class="analytics-card">
                                        <h4>Products Sold</h4>
                                        <p class="analytics-value" id="products-sold">0</p>
                                    </div>
                                    <div class="analytics-card">
                                        <h4>Problem Reports</h4>
                                        <p class="analytics-value" id="problem-reports">0</p>
                                    </div>
                                    <div class="analytics-card">
                                        <h4>Quotation Requests</h4>
                                        <p class="analytics-value" id="quotation-requests">0</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Settings Tab -->
                        <div class="dashboard-tab-content" id="admin-settings-tab">
                            <div class="settings-management">
                                <h3>Admin Settings</h3>
                                <div class="form-group password-group">
                                    <label for="current-password">Current Password</label>
                                    <input type="password" id="current-password" placeholder="Enter current password">
                                    <button type="button" class="password-toggle" id="toggle-current-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="form-group password-group">
                                    <label for="new-password">New Password</label>
                                    <input type="password" id="new-password" placeholder="Enter new password">
                                    <button type="button" class="password-toggle" id="toggle-new-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="form-group password-group">
                                    <label for="confirm-password">Confirm New Password</label>
                                    <input type="password" id="confirm-password" placeholder="Confirm new password">
                                    <button type="button" class="password-toggle" id="toggle-confirm-admin-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div id="otp-verification-section" style="display: none;">
                                    <div class="form-group">
                                        <label for="admin-otp">OTP Verification</label>
                                        <input type="text" id="admin-otp" placeholder="Enter OTP received via WhatsApp" required>
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" class="btn" id="verify-otp-btn">Verify OTP & Change Password</button>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn" id="change-password-btn">Change Password</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Iggy Power Solutions</h3>
                    <p>Your trusted partner for quality electrical products and expert services. We provide innovative power solutions for residential and commercial needs.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#home">Home</a></li>
                        <li><a href="#products">Products</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#gallery">Gallery</a></li>
                        <li><a href="#problem-solver">Problem Solver</a></li>
                        <li><a href="#quotation">Quotation</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Our Products</h3>
                    <ul class="footer-links">
                        <li><a href="#">Solar Panels</a></li>
                        <li><a href="#">Inverters</a></li>
                        <li><a href="#">Batteries</a></li>
                        <li><a href="#">Charge Controllers</a></li>
                        <li><a href="#">Accessories</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Our Services</h3>
                    <ul class="footer-links">
                        <li><a href="#">Solar Installation</a></li>
                        <li><a href="#">Electrical Maintenance</a></li>
                        <li><a href="#">Inverter Repair</a></li>
                        <li><a href="#">Home Electrification</a></li>
                        <li><a href="#">Commercial Solutions</a></li>
                        <li><a href="#">Emergency Services</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy;@2025 Iggy Power Solutions.  copyright All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Cart Modal -->
    <div class="modal" id="cart-modal">
        <div class="modal-content">
            <button class="close-btn" id="close-cart">&times;</button>
            <div class="modal-header">
                <h2>Your Shopping Cart</h2>
            </div>
            <div class="cart-items">
                <!-- Cart items will be dynamically added here -->
            </div>
            <div class="cart-total">
                <span>Total:</span>
                <span id="cart-total-price">KSh 0.00</span>
            </div>
            <button class="checkout-btn" id="checkout-btn"><i class="fas fa-shopping-bag"></i> Proceed to Checkout</button>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <button class="close-btn" id="close-product">&times;</button>
            <div class="product-detail">
                <div class="product-detail-img">
                    <i class="fas fa-solar-panel" id="detail-product-icon"></i>
                </div>
                <div class="product-detail-info">
                    <h2 id="detail-product-name">Solar Panel 300W</h2>
                    <div class="price" id="detail-product-price">KSh 45,999</div>
                    <div class="description" id="detail-product-description">
                        <p>High-efficiency monocrystalline solar panel with advanced cell technology for maximum power output. Perfect for residential and commercial applications.</p>
                    </div>
                    <div class="product-specs">
                        <h3>Specifications</h3>
                        <ul id="detail-product-specs">
                            <li><i class="fas fa-check"></i> Maximum Power: 300W</li>
                            <li><i class="fas fa-check"></i> Cell Type: Monocrystalline</li>
                            <li><i class="fas fa-check"></i> Efficiency: &gt;20%</li>
                            <li><i class="fas fa-check"></i> Dimensions: 1640×992×35mm</li>
                            <li><i class="fas fa-check"></i> Weight: 18.5kg</li>
                        </ul>
                    </div>
                    <div class="product-actions" id="detail-product-actions">
                        <!-- This will be dynamically populated based on stock status -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Service Detail Modal -->
    <div class="modal" id="service-modal">
        <div class="modal-content">
            <button class="close-btn" id="close-service">&times;</button>
            <div class="service-detail">
                <div class="service-detail-img">
                    <i class="fas fa-solar-panel" id="detail-service-icon"></i>
                </div>
                <div class="service-detail-info">
                    <h2 id="detail-service-name">Solar Installation</h2>
                    <div class="price" id="detail-service-price">From KSh 150,000</div>
                    <div class="description" id="detail-service-description">
                        <p>Professional installation of solar power systems for homes and businesses. Our certified technicians ensure optimal placement and connection for maximum efficiency.</p>
                    </div>
                    <div class="service-features">
                        <h3>Service Includes</h3>
                        <ul id="detail-service-features">
                            <li><i class="fas fa-check"></i> Site assessment and planning</li>
                            <li><i class="fas fa-check"></i> Professional installation</li>
                            <li><i class="fas fa-check"></i> System testing and commissioning</li>
                            <li><i class="fas fa-check"></i> User training</li>
                            <li><i class="fas fa-check"></i> 5-year workmanship warranty</li>
                        </ul>
                    </div>
                    <button class="btn" id="detail-service-book"><i class="fab fa-whatsapp"></i> Book This Service</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal" id="edit-profile-modal">
        <div class="modal-content">
            <button class="close-btn" id="close-edit-profile">&times;</button>
            <div class="modal-header">
                <h2>Edit Profile</h2>
            </div>
            <div class="account-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-firstname">First Name</label>
                        <input type="text" id="edit-firstname" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-lastname">Last Name</label>
                        <input type="text" id="edit-lastname" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="edit-email">Email Address</label>
                    <input type="email" id="edit-email" required>
                </div>
                <div class="form-group">
                    <label for="edit-phone">Phone Number</label>
                    <input type="tel" id="edit-phone">
                </div>
                <div class="form-group password-group">
                    <label for="current-password">Current Password (to confirm changes)</label>
                    <input type="password" id="current-password" required>
                    <button type="button" class="password-toggle" id="toggle-current-profile-password">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn" id="save-profile-btn">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Modal -->
    <div class="chat-modal" id="chat-modal">
        <div class="chat-modal-content">
            <button class="close-btn" id="close-chat">&times;</button>
            <div class="modal-header">
                <h3>Chat with Customer</h3>
                <p id="chat-customer-info">Customer: Loading...</p>
            </div>
            <div class="chat-container" id="chat-container">
                <!-- Chat messages will be added here -->
            </div>
            <div class="chat-input">
                <input type="text" id="chat-message" placeholder="Type your message...">
                <button class="btn btn-small" id="send-message">Send</button>
            </div>
        </div>
    </div>

    <!-- Reset Password Modal -->
    <div class="reset-password-modal" id="reset-password-modal">
        <div class="reset-password-content">
            <button class="close-btn" id="close-reset-password">&times;</button>
            <div class="modal-header">
                <h2>Reset Password</h2>
            </div>
            <div class="account-form">
                <div class="form-group">
                    <label for="reset-email">Email Address</label>
                    <input type="email" id="reset-email" placeholder="Enter your email address" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn" id="send-verification-btn">Send Verification Code via WhatsApp</button>
                </div>
                
                <div id="verification-section" style="display: none;">
                    <div class="form-group">
                        <label>Verification Code</label>
                        <div class="verification-code">
                            <input type="text" maxlength="1" id="code-1">
                            <input type="text" maxlength="1" id="code-2">
                            <input type="text" maxlength="1" id="code-3">
                            <input type="text" maxlength="1" id="code-4">
                            <input type="text" maxlength="1" id="code-5">
                            <input type="text" maxlength="1" id="code-6">
                        </div>
                    </div>
                    <div class="form-group password-group">
                        <label for="new-reset-password">New Password</label>
                        <input type="password" id="new-reset-password" placeholder="Enter new password" required>
                        <button type="button" class="password-toggle" id="toggle-reset-password">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-group password-group">
                        <label for="confirm-reset-password">Confirm New Password</label>
                        <input type="password" id="confirm-reset-password" placeholder="Confirm new password" required>
                        <button type="button" class="password-toggle" id="toggle-confirm-reset-password">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" id="reset-password-btn">Reset Password</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <div class="scroll-top" id="scroll-top">
        <i class="fas fa-chevron-up"></i>
    </div>

    <script>

        // Global current user variable
let currentUser = JSON.parse(localStorage.getItem('ips_current_user')) || null;


        // Admin credentials
        const ADMIN_CREDENTIALS = {
            username: "admin",
            password: "iggypower2025",
            phone: "254111923477"
        };

        // Product data (loaded from localStorage)
        let products = JSON.parse(localStorage.getItem('ips_products')) || [
            {
                id: 1,
                name: "Solar Panel 300W",
                price: "KSh 45,999",
                description: "High-efficiency monocrystalline solar panel for residential and commercial use.",
                icon: "fas fa-solar-panel",
                specs: [
                    "Maximum Power: 300W",
                    "Cell Type: Monocrystalline",
                    "Efficiency: >20%",
                    "Dimensions: 1640×992×35mm",
                    "Weight: 18.5kg"
                ],
                category: "solar",
                inStock: false,
                image: null
            },
            {
                id: 2,
                name: "Power Inverter 2000VA",
                price: "KSh 24,999",
                description: "Pure sine wave inverter with LCD display and multiple protection features.",
                icon: "fas fa-bolt",
                specs: [
                    "Power: 2000VA/1600W",
                    "Waveform: Pure Sine Wave",
                    "Input Voltage: 12V/24V",
                    "Output Voltage: 220-240V",
                    "Protection: Overload, Short Circuit, Overheat"
                ],
                category: "inverter",
                inStock: true,
                image: null
            },
            {
                id: 3,
                name: "Deep Cycle Battery 200AH",
                price: "KSh 32,000",
                description: "Maintenance-free deep cycle battery for solar and inverter applications.",
                icon: "fas fa-car-battery",
                specs: [
                    "Capacity: 200AH",
                    "Type: Deep Cycle AGM",
                    "Voltage: 12V",
                    "Lifespan: 5-7 years",
                    "Maintenance: Free"
                ],
                category: "battery",
                inStock: true,
                image: null
            }
        ];

        // Service data (loaded from localStorage)
        let servicesData = JSON.parse(localStorage.getItem('ips_services')) || [
            {
                id: 1,
                name: "Solar Installation",
                price: "From KSh 150,000",
                description: "Professional installation of solar power systems for homes and businesses. Our certified technicians ensure optimal placement and connection for maximum efficiency.",
                icon: "fas fa-solar-panel",
                features: [
                    "Site assessment and planning",
                    "Professional installation",
                    "System testing and commissioning",
                    "User training",
                    "5-year workmanship warranty"
                ]
            },
            {
                id: 2,
                name: "Electrical Maintenance",
                price: "From KSh 8,000",
                description: "Regular maintenance and troubleshooting for electrical systems to ensure safety and efficiency.",
                icon: "fas fa-tools",
                features: [
                    "Electrical system inspection",
                    "Wiring checks and repairs",
                    "Circuit breaker testing",
                    "Safety device verification",
                    "Emergency response"
                ]
            },
            {
                id: 3,
                name: "Inverter Repair",
                price: "From KSh 5,000",
                description: "Expert repair services for all types of inverters with genuine spare parts.",
                icon: "fas fa-bolt",
                features: [
                    "Diagnosis and troubleshooting",
                    "Component replacement",
                    "Software updates",
                    "Performance testing",
                    "90-day service warranty"
                ]
            },
            {
                id: 4,
                name: "Home Electrification",
                price: "From KSh 120,000",
                description: "Complete home wiring and electrical system setup for new constructions.",
                icon: "fas fa-home",
                features: [
                    "Electrical design and planning",
                    "Complete wiring installation",
                    "Lighting and outlet setup",
                    "Safety systems installation",
                    "Final inspection and certification"
                ]
            },
            {
                id: 5,
                name: "Commercial Solutions",
                price: "From KSh 250,000",
                description: "Electrical solutions for commercial buildings, offices, and industrial facilities.",
                icon: "fas fa-industry",
                features: [
                    "Commercial electrical design",
                    "Three-phase power systems",
                    "Emergency power systems",
                    "Energy management solutions",
                    "Compliance with regulations"
                ]
            },
            {
                id: 6,
                name: "Emergency Services",
                price: "From KSh 12,000",
                description: "24/7 emergency electrical services for urgent repairs and power restoration.",
                icon: "fas fa-exclamation-triangle",
                features: [
                    "24/7 availability",
                    "Rapid response team",
                    "Temporary power solutions",
                    "Safety hazard mitigation",
                    "Complete restoration"
                ]
            },
            {
                id: 7,
                name: "Backup Power Installation",
                price: "From KSh 80,000",
                description: "Installation of backup power systems including generators and UPS systems.",
                icon: "fas fa-plug",
                features: [
                    "System design and planning",
                    "Generator installation",
                    "UPS system setup",
                    "Automatic transfer switch",
                    "Testing and commissioning"
                ]
            },
            {
                id: 8,
                name: "EV Charging Station",
                price: "From KSh 95,000",
                description: "Installation of electric vehicle charging stations for homes and businesses.",
                icon: "fas fa-charging-station",
                features: [
                    "Site assessment",
                    "Charging station installation",
                    "Electrical connection",
                    "Safety testing",
                    "User training"
                ]
            }
        ];

        // Gallery images
        let galleryImages = JSON.parse(localStorage.getItem('ips_gallery')) || [];

        // Problem reports
        let problemReports = JSON.parse(localStorage.getItem('ips_problems')) || [];

        // Quotation requests
        let quotations = JSON.parse(localStorage.getItem('ips_quotations')) || [];

        // Orders data
        let orders = JSON.parse(localStorage.getItem('ips_orders')) || [];

        // Chat data
        let chats = JSON.parse(localStorage.getItem('ips_chats')) || {};

        // Current chat customer
        let currentChatCustomer = null;

        // Cart data
        let cart = [];
        let totalPrice = 0;

        // Notification Toast Function
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            toastMessage.textContent = message;
            toast.className = 'toast';
            toast.classList.add(type);
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Password Toggle Functionality
        function setupPasswordToggles() {
            // Login password toggle
            document.getElementById('toggle-login-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('login-password');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.className = 'fas fa-eye-slash';
                } else {
                    passwordInput.type = 'password';
                    icon.className = 'fas fa-eye';
                }
            });

            // Register password toggle
            document.getElementById('toggle-register-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('register-password');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.className = 'fas fa-eye-slash';
                } else {
                    passwordInput.type = 'password';
                    icon.className = 'fas fa-eye';
                }
            });

            // Confirm password toggle
            document.getElementById('toggle-confirm-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('register-confirm-password');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.className = 'fas fa-eye-slash';
                } else {
                    passwordInput.type = 'password';
                    icon.className = 'fas fa-eye';
                }
            });

            // Admin current password toggle
            document.getElementById('toggle-current-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('current-password');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.className = 'fas fa-eye-slash';
                } else {
                    passwordInput.type = 'password';
                    icon.className = 'fas fa-eye';
                }
            });

            // Admin new password toggle
            document.getElementById('toggle-new-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('new-password');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.className = 'fas fa-eye-slash';
                } else {
                    passwordInput.type = 'password';
                    icon.className = 'fas fa-eye';
                }
            });

            // Admin confirm password toggle
            document.getElementById('toggle-confirm-admin-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('confirm-password');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.className = 'fas fa-eye-slash';
                } else {
                    passwordInput.type = 'password';
                    icon.className = 'fas fa-eye';
                }
            });

            // Profile current password toggle
            document.getElementById('toggle-current-profile-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('current-password');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.className = 'fas fa-eye-slash';
                } else {
                    passwordInput.type = 'password';
                    icon.className = 'fas fa-eye';
                }
            });

            // Reset password toggle
            document.getElementById('toggle-reset-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('new-reset-password');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.className = 'fas fa-eye-slash';
                } else {
                    passwordInput.type = 'password';
                    icon.className = 'fas fa-eye';
                }
            });

            // Confirm reset password toggle
            document.getElementById('toggle-confirm-reset-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('confirm-reset-password');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.className = 'fas fa-eye-slash';
                } else {
                    passwordInput.type = 'password';
                    icon.className = 'fas fa-eye';
                }
            });
        }

        // Mobile Menu Functionality
        const mobileToggle = document.getElementById('mobile-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        const closeMenu = document.getElementById('close-menu');
        const mobileNavLinks = document.querySelectorAll('.mobile-nav-links a');

        // Open mobile menu
        mobileToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            mobileMenu.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        // Close mobile menu
        closeMenu.addEventListener('click', function(e) {
            e.stopPropagation();
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
        });

        // Close menu when clicking on links
        mobileNavLinks.forEach(link => {
            link.addEventListener('click', function() {
                mobileMenu.classList.remove('active');
                document.body.style.overflow = '';
            });
        });

        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
            if (mobileMenu.classList.contains('active') && 
                !mobileMenu.contains(e.target) && 
                e.target !== mobileToggle) {
                mobileMenu.classList.remove('active');
                document.body.style.overflow = '';
            }
        });

        // Close menu with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && mobileMenu.classList.contains('active')) {
                mobileMenu.classList.remove('active');
                document.body.style.overflow = '';
            }
        });

        // Account Toggle Functionality
        const loginToggle = document.getElementById('login-toggle');
        const registerToggle = document.getElementById('register-toggle');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const showRegisterLink = document.getElementById('show-register');
        const showLoginLink = document.getElementById('show-login');

        loginToggle.addEventListener('click', function() {
            loginToggle.classList.add('active');
            registerToggle.classList.remove('active');
            loginForm.style.display = 'block';
            registerForm.style.display = 'none';
        });

        registerToggle.addEventListener('click', function() {
            registerToggle.classList.add('active');
            loginToggle.classList.remove('active');
            registerForm.style.display = 'block';
            loginForm.style.display = 'none';
        });

        showRegisterLink.addEventListener('click', function(e) {
            e.preventDefault();
            loginForm.style.display = 'none';
            registerForm.style.display = 'block';
            loginToggle.classList.remove('active');
            registerToggle.classList.add('active');
        });

        showLoginLink.addEventListener('click', function(e) {
            e.preventDefault();
            registerForm.style.display = 'none';
            loginForm.style.display = 'block';
            registerToggle.classList.remove('active');
            loginToggle.classList.add('active');
        });

        // Login Functionality
        document.getElementById('login-btn').addEventListener('click', function() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (!email || !password) {
                showToast('Please enter both email and password', 'error');
                return;
            }
            
            // Check if admin login
            if (email === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                // Admin login
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('register-form').style.display = 'none';
                document.getElementById('admin-dashboard').style.display = 'block';
                localStorage.setItem('ips_admin_logged_in', 'true');
                showToast('Admin login successful!');
                
                // Load admin data
                loadAdminProducts();
                loadAdminServices();
                loadAdminGallery();
                loadAdminProblems();
                loadAdminQuotations();
                loadAdminOrders();
                updateAdminAnalytics();
                return;
            }
            
            // Regular user login
            const users = JSON.parse(localStorage.getItem('ips_users')) || [];
            const user = users.find(u => u.email === email && u.password === password);
            
            if (!user) {
                showToast('Invalid email or password', 'error');
                return;
            }
            
            // Login successful
            localStorage.setItem('ips_current_user', JSON.stringify(user));
            showToast('Login successful!');
            
            // Show dashboard
            loginForm.style.display = 'none';
            registerForm.style.display = 'none';
            document.getElementById('account-dashboard').style.display = 'block';
            
            // Update dashboard with user data
            updateUserDashboard(user);
        });

        // Registration Functionality
        document.getElementById('register-btn').addEventListener('click', function() {
            const firstName = document.getElementById('register-firstname').value;
            const lastName = document.getElementById('register-lastname').value;
            const email = document.getElementById('register-email').value;
            const phone = document.getElementById('register-phone').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            
            // Basic validation
            if (!firstName || !lastName || !email || !password) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }
            
            if (password.length < 6) {
                showToast('Password must be at least 6 characters long', 'error');
                return;
            }
            
            // Check if user already exists
            const existingUsers = JSON.parse(localStorage.getItem('ips_users') || '[]');
            const userExists = existingUsers.find(user => user.email === email);
            
            if (userExists) {
                showToast('An account with this email already exists', 'error');
                return;
            }
            
            // Create new user
            const newUser = {
                id: Date.now().toString(),
                firstName,
                lastName,
                email,
                phone,
                password,
                joinDate: new Date().toISOString(),
                orders: [],
                wishlist: [],
                settings: {
                    emailNotifications: true,
                    smsNotifications: false,
                    newsletter: true
                }
            };
            
            existingUsers.push(newUser);
            localStorage.setItem('ips_users', JSON.stringify(existingUsers));
            
            showToast('Account created successfully! Please login.');
            
            // Switch to login form
            registerForm.style.display = 'none';
            loginForm.style.display = 'block';
            registerToggle.classList.remove('active');
            loginToggle.classList.add('active');
            
            // Clear form
            document.getElementById('register-form').reset();
        });

        // Logout Functionality
        document.getElementById('logout-btn').addEventListener('click', function() {
            localStorage.removeItem('ips_current_user');
            showToast('Logged out successfully', 'success');
            
            // Show login form
            document.getElementById('account-dashboard').style.display = 'none';
            loginForm.style.display = 'block';
            loginToggle.classList.add('active');
            registerToggle.classList.remove('active');
            
            // Clear login form
            document.getElementById('login-form').reset();
        });

        // Admin Logout Functionality
        document.getElementById('admin-logout-btn').addEventListener('click', function() {
            document.getElementById('admin-dashboard').style.display = 'none';
            loginForm.style.display = 'block';
            document.getElementById('login-email').value = '';
            document.getElementById('login-password').value = '';
            localStorage.removeItem('ips_admin_logged_in');
            showToast('Admin logged out successfully');
        });

        // Forgot Password Functionality
        document.getElementById('forgot-password').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('reset-password-modal').style.display = 'flex';
        });

        // Close Reset Password Modal
        document.getElementById('close-reset-password').addEventListener('click', function() {
            document.getElementById('reset-password-modal').style.display = 'none';
        });

        // Send Verification Code
        document.getElementById('send-verification-btn').addEventListener('click', function() {
            const email = document.getElementById('reset-email').value;
            
            if (!email) {
                showToast('Please enter your email address', 'error');
                return;
            }
            
            // Generate random 6-digit code
            const verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
            
            // Store code in localStorage (in a real app, this would be sent to the server)
            localStorage.setItem('ips_verification_code', verificationCode);
            localStorage.setItem('ips_verification_email', email);
            
            // Send code via WhatsApp (simulated)
            const message = `*Iggy Power Solutions - Password Reset*\n\nYour verification code is: ${verificationCode}\n\nEnter this code to reset your password.`;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/254111923477?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
            
            // Show verification section
            document.getElementById('verification-section').style.display = 'block';
            showToast('Verification code sent to WhatsApp');
            
            // Auto-focus first code input
            document.getElementById('code-1').focus();
        });

        // Verification Code Input Handling
        const codeInputs = document.querySelectorAll('.verification-code input');
        codeInputs.forEach((input, index) => {
            input.addEventListener('input', function() {
                if (this.value.length === 1 && index < codeInputs.length - 1) {
                    codeInputs[index + 1].focus();
                }
            });
            
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Backspace' && this.value.length === 0 && index > 0) {
                    codeInputs[index - 1].focus();
                }
            });
        });

        // Reset Password
        document.getElementById('reset-password-btn').addEventListener('click', function() {
            const enteredCode = Array.from(codeInputs).map(input => input.value).join('');
            const storedCode = localStorage.getItem('ips_verification_code');
            const email = localStorage.getItem('ips_verification_email');
            const newPassword = document.getElementById('new-reset-password').value;
            const confirmPassword = document.getElementById('confirm-reset-password').value;
            
            if (!enteredCode || !newPassword || !confirmPassword) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            if (enteredCode !== storedCode) {
                showToast('Invalid verification code', 'error');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }
            
            if (newPassword.length < 6) {
                showToast('Password must be at least 6 characters long', 'error');
                return;
            }
            
            // Update password in users data
            const users = JSON.parse(localStorage.getItem('ips_users') || '[]');
            const userIndex = users.findIndex(u => u.email === email);
            
            if (userIndex !== -1) {
                users[userIndex].password = newPassword;
                localStorage.setItem('ips_users', JSON.stringify(users));
                
                showToast('Password reset successfully!');
                document.getElementById('reset-password-modal').style.display = 'none';
                
                // Clear form
                document.getElementById('reset-email').value = '';
                codeInputs.forEach(input => input.value = '');
                document.getElementById('new-reset-password').value = '';
                document.getElementById('confirm-reset-password').value = '';
                document.getElementById('verification-section').style.display = 'none';
                
                // Clear stored verification data
                localStorage.removeItem('ips_verification_code');
                localStorage.removeItem('ips_verification_email');
            } else {
                showToast('User not found', 'error');
            }
        });

        // Load Products for Main Site
        function loadProducts() {
            const productsGrid = document.getElementById('products-grid');
            productsGrid.innerHTML = '';
            
            if (products.length === 0) {
                productsGrid.innerHTML = '<p>No products available at the moment.</p>';
                return;
            }
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.setAttribute('data-category', product.category);
                
                productCard.innerHTML = `
                    <div class="product-img">
                        ${product.image ? 
                            `<img src="${product.image}" alt="${product.name}" style="width: 100%; height: 100%; object-fit: cover;">` : 
                            `<i class="${product.icon}"></i>`
                        }
                        ${!product.inStock ? '<div class="out-of-stock-badge">Out of Stock</div>' : ''}
                    </div>
                    <div class="product-info">
                        <h3>${product.name}</h3>
                        <p>${product.description}</p>
                        <div class="product-price">${product.price}</div>
                        <div class="product-actions">
                            ${product.inStock ? 
                                `<button class="add-to-cart"><i class="fas fa-cart-plus"></i> Add to Cart</button>` : 
                                `<button class="notify-btn" data-product="${product.name}"><i class="fab fa-whatsapp"></i> Notify Me</button>`
                            }
                            <button class="detail-btn" data-product="${product.id}"><i class="fas fa-info-circle"></i> Details</button>
                        </div>
                    </div>
                `;
                
                productsGrid.appendChild(productCard);
            });
            
            // Reattach event listeners
            attachProductEventListeners();
        }

        // Load Services for Main Site
        function loadServices() {
            const servicesGrid = document.getElementById('services-grid');
            servicesGrid.innerHTML = '';
            
            if (servicesData.length === 0) {
                servicesGrid.innerHTML = '<p>No services available at the moment.</p>';
                return;
            }
            
            servicesData.forEach(service => {
                const serviceCard = document.createElement('div');
                serviceCard.className = 'service-card';
                
                serviceCard.innerHTML = `
                    <div class="service-icon">
                        <i class="${service.icon}"></i>
                    </div>
                    <h3>${service.name}</h3>
                    <p>${service.description}</p>
                    <div class="service-price">${service.price}</div>
                    <div class="service-actions">
                        <button class="btn" data-service="${service.name}"><i class="fab fa-whatsapp"></i> Book Service</button>
                        <button class="detail-btn" data-service="${service.id}">View Details</button>
                    </div>
                `;
                
                servicesGrid.appendChild(serviceCard);
            });
            
            // Reattach event listeners
            attachServiceEventListeners();
        }

        // Load Gallery for Main Site
        function loadGallery() {
            const galleryGrid = document.getElementById('gallery-grid');
            galleryGrid.innerHTML = '';
            
            if (galleryImages.length === 0) {
                galleryGrid.innerHTML = '<p>No gallery images available.</p>';
                return;
            }
            
            galleryImages.forEach((image, index) => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item';
                
                galleryItem.innerHTML = `
                    <img src="${image}" alt="Gallery Image ${index + 1}">
                    <div class="gallery-overlay">
                        <h3>Project ${index + 1}</h3>
                        <p>Iggy Power Solutions installation</p>
                    </div>
                `;
                
                galleryGrid.appendChild(galleryItem);
            });
        }

        // Load Admin Products
        function loadAdminProducts() {
            const productsList = document.getElementById('admin-products-list');
            productsList.innerHTML = '';
            
            if (products.length === 0) {
                productsList.innerHTML = '<p>No products found.</p>';
                return;
            }
            
            products.forEach(product => {
                const productItem = document.createElement('div');
                productItem.className = 'product-item';
                productItem.innerHTML = `
                    <div class="product-item-img">
                        ${product.image ? `<img src="${product.image}" alt="${product.name}">` : `<i class="${product.icon}"></i>`}
                    </div>
                    <div class="product-item-info">
                        <div class="product-item-name">${product.name}</div>
                        <div class="product-item-price">${product.price} 
                            <span class="product-item-status ${product.inStock ? 'status-in-stock' : 'status-out-of-stock'}">
                                ${product.inStock ? 'In Stock' : 'Out of Stock'}
                            </span>
                        </div>
                    </div>
                    <div class="product-item-actions">
                        <button class="btn btn-small btn-warning" data-id="${product.id}" data-action="edit">
                            Edit
                        </button>
                        <button class="btn btn-small ${product.inStock ? 'btn-danger' : 'btn-success'}" 
                                data-id="${product.id}" 
                                data-action="${product.inStock ? 'out-of-stock' : 'in-stock'}">
                            ${product.inStock ? 'Mark Out of Stock' : 'Mark In Stock'}
                        </button>
                        <button class="btn btn-small btn-danger" data-id="${product.id}" data-action="delete">
                            Delete
                        </button>
                    </div>
                `;
                
                productsList.appendChild(productItem);
            });
            
            // Add event listeners to product action buttons
            document.querySelectorAll('#admin-products-list .product-item-actions .btn').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    const action = this.getAttribute('data-action');
                    
                    if (action === 'delete') {
                        deleteProduct(productId);
                    } else if (action === 'edit') {
                        editProduct(productId);
                    } else if (action === 'in-stock' || action === 'out-of-stock') {
                        toggleStockStatus(productId, action === 'in-stock');
                    }
                });
            });
        }

        // Load Admin Services
        function loadAdminServices() {
            const servicesList = document.getElementById('admin-services-list');
            servicesList.innerHTML = '';
            
            if (servicesData.length === 0) {
                servicesList.innerHTML = '<p>No services found.</p>';
                return;
            }
            
            servicesData.forEach(service => {
                const serviceItem = document.createElement('div');
                serviceItem.className = 'product-item';
                serviceItem.innerHTML = `
                    <div class="product-item-img">
                        <i class="${service.icon}"></i>
                    </div>
                    <div class="product-item-info">
                        <div class="product-item-name">${service.name}</div>
                        <div class="product-item-price">${service.price}</div>
                    </div>
                    <div class="product-item-actions">
                        <button class="btn btn-small btn-warning" data-id="${service.id}" data-action="edit">
                            Edit
                        </button>
                        <button class="btn btn-small btn-danger" data-id="${service.id}" data-action="delete">
                            Delete
                        </button>
                    </div>
                `;
                
                servicesList.appendChild(serviceItem);
            });
            
            // Add event listeners to service action buttons
            document.querySelectorAll('#admin-services-list .product-item-actions .btn').forEach(button => {
                button.addEventListener('click', function() {
                    const serviceId = parseInt(this.getAttribute('data-id'));
                    const action = this.getAttribute('data-action');
                    
                    if (action === 'delete') {
                        deleteService(serviceId);
                    } else if (action === 'edit') {
                        editService(serviceId);
                    }
                });
            });
        }

        // Load Admin Gallery
        function loadAdminGallery() {
            const galleryPreview = document.getElementById('gallery-preview');
            galleryPreview.innerHTML = '';
            
            galleryImages.forEach((image, index) => {
                const previewItem = document.createElement('div');
                previewItem.className = 'preview-item';
                
                const img = document.createElement('img');
                img.src = image;
                
                const removeBtn = document.createElement('button');
                removeBtn.className = 'remove-btn';
                removeBtn.innerHTML = '<i class="fas fa-times"></i>';
                removeBtn.addEventListener('click', function() {
                    galleryImages.splice(index, 1);
                    localStorage.setItem('ips_gallery', JSON.stringify(galleryImages));
                    loadAdminGallery();
                    loadGallery(); // Update main site gallery
                });
                
                previewItem.appendChild(img);
                previewItem.appendChild(removeBtn);
                galleryPreview.appendChild(previewItem);
            });
        }

        // Load Admin Problems
        function loadAdminProblems() {
            const problemList = document.getElementById('admin-problem-list');
            problemList.innerHTML = '';
            
            if (problemReports.length === 0) {
                problemList.innerHTML = '<p class="no-problems">No problem reports found.</p>';
                return;
            }
            
            problemReports.forEach(problem => {
                const problemItem = document.createElement('div');
                problemItem.className = `problem-item ${problem.urgent ? 'urgent' : ''}`;
                
                // Format problem type for display
                const problemTypeText = problem.type.split('-').map(word => 
                    word.charAt(0).toUpperCase() + word.slice(1)
                ).join(' ');
                
                problemItem.innerHTML = `
                    <div class="problem-header">
                        <div class="problem-name">${problem.name} - ${problem.phone}</div>
                        <div class="problem-date">${new Date(problem.date).toLocaleString()}</div>
                    </div>
                    <div class="problem-type">${problemTypeText}</div>
                    <div class="problem-description">${problem.description}</div>
                    ${problem.images.length > 0 || problem.videos.length > 0 ? `
                        <div class="problem-media">
                            ${problem.images.map(img => `
                                <div class="media-item">
                                    <img src="${img}" alt="Problem image">
                                </div>
                            `).join('')}
                            ${problem.videos.map(vid => `
                                <div class="media-item">
                                    <video controls>
                                        <source src="${vid}" type="video/mp4">
                                    </video>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                    <div class="problem-actions">
                        <button class="btn btn-small" data-id="${problem.id}" data-action="chat">
                            <i class="fas fa-comments"></i> Chat
                        </button>
                        <button class="btn btn-small btn-success" data-id="${problem.id}" data-action="whatsapp">
                            <i class="fab fa-whatsapp"></i> Contact
                        </button>
                        <button class="btn btn-small btn-danger" data-id="${problem.id}" data-action="resolve">
                            Mark Resolved
                        </button>
                    </div>
                `;
                
                problemList.appendChild(problemItem);
            });
            
            // Add event listeners to problem action buttons
            document.querySelectorAll('#admin-problem-list .problem-actions .btn').forEach(button => {
                button.addEventListener('click', function() {
                    const problemId = parseInt(this.getAttribute('data-id'));
                    const action = this.getAttribute('data-action');
                    
                    if (action === 'resolve') {
                        resolveProblem(problemId);
                    } else if (action === 'chat') {
                        openChat(problemId);
                    } else if (action === 'whatsapp') {
                        contactProblemViaWhatsApp(problemId);
                    }
                });
            });
        }

        // Load Admin Quotations
        function loadAdminQuotations() {
            const quotationList = document.getElementById('admin-quotation-list');
            quotationList.innerHTML = '';
            
            if (quotations.length === 0) {
                quotationList.innerHTML = '<p class="no-quotations">No quotation requests found.</p>';
                return;
            }
            
            quotations.forEach(quotation => {
                const quotationItem = document.createElement('div');
                quotationItem.className = 'admin-order-item';
                quotationItem.innerHTML = `
                    <div class="admin-order-header">
                        <span class="admin-order-id">Quotation #${quotation.id}</span>
                        <span class="admin-order-date">${new Date(quotation.date).toLocaleDateString()}</span>
                        <span class="admin-order-status status-pending">Pending</span>
                    </div>
                    <div class="admin-order-products">
                        <div class="admin-order-product">
                            <span>Name: ${quotation.name}</span>
                            <span>Email: ${quotation.email}</span>
                        </div>
                        <div class="admin-order-product">
                            <span>Phone: ${quotation.phone}</span>
                            <span>Location: ${quotation.location}</span>
                        </div>
                        <div class="admin-order-product">
                            <span>Service/Product: ${quotation.type}</span>
                            <span>Budget: ${quotation.budget}</span>
                        </div>
                        <div class="admin-order-product">
                            <span>Timeline: ${quotation.timeline || 'Not specified'}</span>
                        </div>
                    </div>
                    <div class="admin-order-products">
                        <div class="admin-order-product">
                            <span><strong>Details:</strong> ${quotation.details}</span>
                        </div>
                    </div>
                    <div class="problem-actions">
                        <button class="btn btn-small" data-id="${quotation.id}" data-action="whatsapp">
                            <i class="fab fa-whatsapp"></i> Contact via WhatsApp
                        </button>
                        <button class="btn btn-small btn-success" data-id="${quotation.id}" data-action="complete">
                            Mark Completed
                        </button>
                        <button class="btn btn-small btn-danger" data-id="${quotation.id}" data-action="delete">
                            Delete
                        </button>
                    </div>
                `;
                
                quotationList.appendChild(quotationItem);
            });
            
            // Add event listeners to quotation action buttons
            document.querySelectorAll('#admin-quotation-list .problem-actions .btn').forEach(button => {
                button.addEventListener('click', function() {
                    const quotationId = parseInt(this.getAttribute('data-id'));
                    const action = this.getAttribute('data-action');
                    
                    if (action === 'whatsapp') {
                        contactQuotationViaWhatsApp(quotationId);
                    } else if (action === 'complete') {
                        completeQuotation(quotationId);
                    } else if (action === 'delete') {
                        deleteQuotation(quotationId);
                    }
                });
            });
        }

        // Load Admin Orders
        function loadAdminOrders() {
            const ordersList = document.getElementById('admin-orders-list');
            ordersList.innerHTML = '';
            
            if (orders.length === 0) {
                ordersList.innerHTML = '<p class="no-admin-orders">No orders found.</p>';
                return;
            }
            
            orders.forEach(order => {
                let productsHTML = '';
                order.products.forEach(product => {
                    productsHTML += `
                        <div class="admin-order-product">
                            <span>${product.name}</span>
                            <span>KSh ${product.price.toLocaleString()} x ${product.quantity}</span>
                        </div>
                    `;
                });
                
                const orderItem = document.createElement('div');
                orderItem.className = 'admin-order-item';
                orderItem.innerHTML = `
                    <div class="admin-order-header">
                        <span class="admin-order-id">Order #${order.id}</span>
                        <span class="admin-order-date">${new Date(order.date).toLocaleDateString()}</span>
                        <span class="admin-order-status status-${order.status}">${order.status}</span>
                    </div>
                    <div class="admin-order-products">
                        ${productsHTML}
                    </div>
                    <div class="admin-order-total">
                        Total: KSh ${order.total.toLocaleString()}
                    </div>
                    <div class="problem-actions">
                        <button class="btn btn-small" data-id="${order.id}" data-action="whatsapp">
                            <i class="fab fa-whatsapp"></i> Contact Customer
                        </button>
                    </div>
                `;
                
                ordersList.appendChild(orderItem);
            });
            
            // Add event listeners to order action buttons
            document.querySelectorAll('#admin-orders-list .problem-actions .btn').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = parseInt(this.getAttribute('data-id'));
                    const action = this.getAttribute('data-action');
                    
                    if (action === 'whatsapp') {
                        contactOrderViaWhatsApp(orderId);
                    }
                });
            });
        }

        // Update Admin Analytics
        function updateAdminAnalytics() {
            // Calculate total revenue
            const totalRevenue = orders.reduce((sum, order) => sum + order.total, 0);
            document.getElementById('total-revenue').textContent = `KSh ${totalRevenue.toLocaleString()}`;
            
            // Total orders
            document.getElementById('total-orders').textContent = orders.length;
            
            // Products sold
            const productsSold = orders.reduce((sum, order) => 
                sum + order.products.reduce((prodSum, product) => prodSum + product.quantity, 0), 0);
            document.getElementById('products-sold').textContent = productsSold;
            
            // Problem reports
            document.getElementById('problem-reports').textContent = problemReports.length;
            
            // Quotation requests
            document.getElementById('quotation-requests').textContent = quotations.length;
        }

        // Update User Dashboard
        function updateUserDashboard(user) {
            // Update profile info
            document.getElementById('user-name').textContent = `${user.firstName} ${user.lastName}`;
            document.getElementById('profile-fullname').textContent = `${user.firstName} ${user.lastName}`;
            document.getElementById('profile-email').textContent = user.email;
            document.getElementById('profile-phone').textContent = user.phone || 'Not provided';
            document.getElementById('profile-joindate').textContent = new Date(user.joinDate).toLocaleDateString();
            
            // Update orders
            updateUserOrders(user.orders);
            
            // Update wishlist
            updateUserWishlist(user.wishlist);
            
            // Update settings
            document.getElementById('email-notifications').checked = user.settings.emailNotifications;
            document.getElementById('sms-notifications').checked = user.settings.smsNotifications;
            document.getElementById('newsletter').checked = user.settings.newsletter;
        }

        // Update User Orders
        function updateUserOrders(userOrders) {
            const ordersList = document.getElementById('orders-list');
            
            if (userOrders.length === 0) {
                ordersList.innerHTML = '<p class="no-orders">You haven\'t placed any orders yet.</p>';
                return;
            }
            
            let ordersHTML = '';
            
            userOrders.forEach(order => {
                let productsHTML = '';
                order.products.forEach(product => {
                    productsHTML += `
                        <div class="order-product">
                            <span>${product.name}</span>
                            <span>KSh ${product.price.toLocaleString()} x ${product.quantity}</span>
                        </div>
                    `;
                });
                
                ordersHTML += `
                    <div class="order-item">
                        <div class="order-header">
                            <span class="order-id">Order #${order.id}</span>
                            <span class="order-date">${new Date(order.date).toLocaleDateString()}</span>
                            <span class="order-status status-${order.status}">${order.status}</span>
                        </div>
                        <div class="order-products">
                            ${productsHTML}
                        </div>
                        <div class="order-total">
                            Total: KSh ${order.total.toLocaleString()}
                        </div>
                    </div>
                `;
            });
            
            ordersList.innerHTML = ordersHTML;
        }

        // Update User Wishlist
        function updateUserWishlist(wishlist) {
            const wishlistItems = document.getElementById('wishlist-items');
            
            if (wishlist.length === 0) {
                wishlistItems.innerHTML = '<p class="no-wishlist">Your wishlist is empty.</p>';
                return;
            }
            
            let wishlistHTML = '';
            
            wishlist.forEach(item => {
                wishlistHTML += `
                    <div class="wishlist-item">
                        <div class="wishlist-item-img">
                            <i class="${item.icon}"></i>
                        </div>
                        <div class="wishlist-item-info">
                            <div class="wishlist-item-name">${item.name}</div>
                            <div class="wishlist-item-price">${item.price}</div>
                        </div>
                        <div class="wishlist-item-actions">
                            <button class="btn" onclick="addWishlistItemToCart('${item.id}')">Add to Cart</button>
                            <button class="btn btn-secondary" onclick="removeFromWishlist('${item.id}')">Remove</button>
                        </div>
                    </div>
                `;
            });
            
            wishlistItems.innerHTML = wishlistHTML;
        }

        // Product Management Functions
        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            // Fill form with product data
            document.getElementById('edit-product-id').value = product.id;
            document.getElementById('product-name').value = product.name;
            document.getElementById('product-price').value = parseInt(product.price.replace('KSh ', '').replace(',', ''));
            document.getElementById('product-category').value = product.category;
            document.getElementById('product-status').value = product.inStock ? 'in-stock' : 'out-of-stock';
            document.getElementById('product-description').value = product.description;
            document.getElementById('product-specs').value = product.specs.join('\n');
            
            // Update form title and button
            document.getElementById('product-form-title').textContent = 'Edit Product';
            document.getElementById('save-product-btn').textContent = 'Update Product';
            document.getElementById('cancel-edit-btn').style.display = 'block';
            
            // Scroll to form
            document.getElementById('admin-products-tab').scrollTop = 0;
        }

        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                products = products.filter(p => p.id !== productId);
                localStorage.setItem('ips_products', JSON.stringify(products));
                loadAdminProducts();
                loadProducts(); // Update main site
                showToast('Product deleted successfully');
            }
        }

        function toggleStockStatus(productId, inStock) {
            const productIndex = products.findIndex(p => p.id === productId);
            
            if (productIndex !== -1) {
                products[productIndex].inStock = inStock;
                localStorage.setItem('ips_products', JSON.stringify(products));
                loadAdminProducts();
                loadProducts(); // Update main site
                showToast(`Product ${inStock ? 'marked in stock' : 'marked out of stock'} successfully`);
            }
        }

        // Service Management Functions
        function editService(serviceId) {
            const service = servicesData.find(s => s.id === serviceId);
            if (!service) return;
            
            // Fill form with service data
            document.getElementById('edit-service-id').value = service.id;
            document.getElementById('service-name').value = service.name;
            document.getElementById('service-price').value = service.price.replace('From KSh ', '');
            document.getElementById('service-description').value = service.description;
            document.getElementById('service-features').value = service.features.join('\n');
            document.getElementById('service-icon').value = service.icon;
            
            // Update form title and button
            document.getElementById('service-form-title').textContent = 'Edit Service';
            document.getElementById('save-service-btn').textContent = 'Update Service';
            document.getElementById('cancel-service-edit-btn').style.display = 'block';
            
            // Scroll to form
            document.getElementById('admin-services-tab').scrollTop = 0;
        }

        function deleteService(serviceId) {
            if (confirm('Are you sure you want to delete this service?')) {
                servicesData = servicesData.filter(s => s.id !== serviceId);
                localStorage.setItem('ips_services', JSON.stringify(servicesData));
                loadAdminServices();
                loadServices(); // Update main site
                showToast('Service deleted successfully');
            }
        }

        // Cancel Edit
        document.getElementById('cancel-edit-btn').addEventListener('click', function() {
            resetProductForm();
        });

        document.getElementById('cancel-service-edit-btn').addEventListener('click', function() {
            resetServiceForm();
        });

        function resetProductForm() {
            document.getElementById('product-form').reset();
            document.getElementById('edit-product-id').value = '';
            document.getElementById('product-form-title').textContent = 'Add New Product';
            document.getElementById('save-product-btn').textContent = 'Add Product';
            document.getElementById('cancel-edit-btn').style.display = 'none';
            document.getElementById('product-image-preview').innerHTML = '';
        }

        function resetServiceForm() {
            document.getElementById('service-form').reset();
            document.getElementById('edit-service-id').value = '';
            document.getElementById('service-form-title').textContent = 'Add New Service';
            document.getElementById('save-service-btn').textContent = 'Add Service';
            document.getElementById('cancel-service-edit-btn').style.display = 'none';
        }

        // Save Product
        document.getElementById('save-product-btn').addEventListener('click', function() {
            const productId = document.getElementById('edit-product-id').value;
            const name = document.getElementById('product-name').value;
            const price = document.getElementById('product-price').value;
            const category = document.getElementById('product-category').value;
            const status = document.getElementById('product-status').value;
            const description = document.getElementById('product-description').value;
            const specsText = document.getElementById('product-specs').value;
            
            if (!name || !price || !category || !description) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            // Parse specifications
            const specs = specsText.split('\n').filter(spec => spec.trim() !== '');
            
            // Get product image
            const imagePreview = document.getElementById('product-image-preview');
            const productImage = imagePreview.children.length > 0 ? 
                imagePreview.children[0].querySelector('img').src : null;
            
            if (productId) {
                // Update existing product
                const productIndex = products.findIndex(p => p.id === parseInt(productId));
                if (productIndex !== -1) {
                    products[productIndex].name = name;
                    products[productIndex].price = `KSh ${parseInt(price).toLocaleString()}`;
                    products[productIndex].category = category;
                    products[productIndex].inStock = status === 'in-stock';
                    products[productIndex].description = description;
                    products[productIndex].specs = specs;
                    if (productImage) {
                        products[productIndex].image = productImage;
                    }
                    
                    localStorage.setItem('ips_products', JSON.stringify(products));
                    loadAdminProducts();
                    loadProducts(); // Update main site
                    resetProductForm();
                    showToast('Product updated successfully');
                }
            } else {
                // Add new product
                // Generate a new ID
                const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
                
                // Determine icon based on category
                let icon = 'fas fa-box';
                if (category === 'solar') icon = 'fas fa-solar-panel';
                else if (category === 'inverter') icon = 'fas fa-bolt';
                else if (category === 'battery') icon = 'fas fa-car-battery';
                else if (category === 'accessories') icon = 'fas fa-plug';
                
                // Create new product
                const newProduct = {
                    id: newId,
                    name,
                    price: `KSh ${parseInt(price).toLocaleString()}`,
                    description,
                    icon,
                    specs,
                    category,
                    inStock: status === 'in-stock',
                    image: productImage
                };
                
                // Add to products array
                products.push(newProduct);
                localStorage.setItem('ips_products', JSON.stringify(products));
                
                // Reset form
                resetProductForm();
                
                // Reload products
                loadAdminProducts();
                loadProducts(); // Update main site
                
                showToast('Product added successfully');
            }
        });

        // Save Service
        document.getElementById('save-service-btn').addEventListener('click', function() {
            const serviceId = document.getElementById('edit-service-id').value;
            const name = document.getElementById('service-name').value;
            const price = document.getElementById('service-price').value;
            const description = document.getElementById('service-description').value;
            const featuresText = document.getElementById('service-features').value;
            const icon = document.getElementById('service-icon').value;
            
            if (!name || !price || !description || !icon) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            // Parse features
            const features = featuresText.split('\n').filter(feature => feature.trim() !== '');
            
            if (serviceId) {
                // Update existing service
                const serviceIndex = servicesData.findIndex(s => s.id === parseInt(serviceId));
                if (serviceIndex !== -1) {
                    servicesData[serviceIndex].name = name;
                    servicesData[serviceIndex].price = `From KSh ${price}`;
                    servicesData[serviceIndex].description = description;
                    servicesData[serviceIndex].features = features;
                    servicesData[serviceIndex].icon = icon;
                    
                    localStorage.setItem('ips_services', JSON.stringify(servicesData));
                    loadAdminServices();
                    loadServices(); // Update main site
                    resetServiceForm();
                    showToast('Service updated successfully');
                }
            } else {
                // Add new service
                // Generate a new ID
                const newId = servicesData.length > 0 ? Math.max(...servicesData.map(s => s.id)) + 1 : 1;
                
                // Create new service
                const newService = {
                    id: newId,
                    name,
                    price: `From KSh ${price}`,
                    description,
                    features,
                    icon
                };
                
                // Add to services array
                servicesData.push(newService);
                localStorage.setItem('ips_services', JSON.stringify(servicesData));
                
                // Reset form
                resetServiceForm();
                
                // Reload services
                loadAdminServices();
                loadServices(); // Update main site
                
                showToast('Service added successfully');
            }
        });

        // Image Upload Functionality
        document.getElementById('product-image-upload').addEventListener('click', function() {
            document.getElementById('product-image').click();
        });

        document.getElementById('product-image').addEventListener('change', function(e) {
            handleImageUpload(e, 'product-image-preview');
        });

        document.getElementById('gallery-upload').addEventListener('click', function() {
            document.getElementById('gallery-images').click();
        });

        document.getElementById('gallery-images').addEventListener('change', function(e) {
            handleImageUpload(e, 'gallery-preview', true);
        });

        function handleImageUpload(event, previewId, multiple = false) {
            const files = event.target.files;
            const previewContainer = document.getElementById(previewId);
            
            if (!files || files.length === 0) return;
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                if (!file.type.match('image.*')) continue;
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const previewItem = document.createElement('div');
                    previewItem.className = 'preview-item';
                    
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    
                    const removeBtn = document.createElement('button');
                    removeBtn.className = 'remove-btn';
                    removeBtn.innerHTML = '<i class="fas fa-times"></i>';
                    removeBtn.addEventListener('click', function() {
                        previewItem.remove();
                    });
                    
                    previewItem.appendChild(img);
                    previewItem.appendChild(removeBtn);
                    previewContainer.appendChild(previewItem);
                };
                
                reader.readAsDataURL(file);
                
                if (!multiple) break; // Only process one file if not multiple
            }
        }

        // Upload Gallery Images
        document.getElementById('upload-gallery-btn').addEventListener('click', function() {
            const previewContainer = document.getElementById('gallery-preview');
            const newImages = [];
            
            // Get all images from preview
            for (let i = 0; i < previewContainer.children.length; i++) {
                const img = previewContainer.children[i].querySelector('img');
                if (img) {
                    newImages.push(img.src);
                }
            }
            
            // Add to gallery
            galleryImages = [...galleryImages, ...newImages];
            localStorage.setItem('ips_gallery', JSON.stringify(galleryImages));
            
            // Clear preview and input
            previewContainer.innerHTML = '';
            document.getElementById('gallery-images').value = '';
            
            // Update main site gallery
            loadGallery();
            
            showToast('Images added to gallery successfully');
        });

        // Resolve Problem
        function resolveProblem(problemId) {
            if (confirm('Mark this problem as resolved?')) {
                problemReports = problemReports.filter(p => p.id !== problemId);
                localStorage.setItem('ips_problems', JSON.stringify(problemReports));
                loadAdminProblems();
                showToast('Problem marked as resolved');
            }
        }

        // Contact Problem via WhatsApp
        function contactProblemViaWhatsApp(problemId) {
            const problem = problemReports.find(p => p.id === problemId);
            if (!problem) return;
            
            const message = `*Iggy Power Solutions - Problem Response*\n\nHello ${problem.name},\n\nThank you for reporting your electrical problem. We have received your details and will contact you shortly to schedule an inspection.\n\nBest regards,\nIggy Power Solutions Team`;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${problem.phone}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }

        // Contact Quotation via WhatsApp
        function contactQuotationViaWhatsApp(quotationId) {
            const quotation = quotations.find(q => q.id === quotationId);
            if (!quotation) return;
            
            const message = `*Iggy Power Solutions - Quotation Response*\n\nHello ${quotation.name},\n\nThank you for your quotation request regarding ${quotation.type}. We have received your details and will contact you shortly to discuss your project.\n\nBest regards,\nIggy Power Solutions Team`;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${quotation.phone}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }

        // Contact Order via WhatsApp
        function contactOrderViaWhatsApp(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            // In a real app, we would have customer contact info
            const message = `*Iggy Power Solutions - Order Update*\n\nHello,\n\nThis is an update regarding your order #${order.id}. Please contact us for more details.\n\nBest regards,\nIggy Power Solutions Team`;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/254111923477?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }

        // Complete Quotation
        function completeQuotation(quotationId) {
            if (confirm('Mark this quotation as completed?')) {
                quotations = quotations.filter(q => q.id !== quotationId);
                localStorage.setItem('ips_quotations', JSON.stringify(quotations));
                loadAdminQuotations();
                showToast('Quotation marked as completed');
            }
        }

        // Delete Quotation
        function deleteQuotation(quotationId) {
            if (confirm('Are you sure you want to delete this quotation?')) {
                quotations = quotations.filter(q => q.id !== quotationId);
                localStorage.setItem('ips_quotations', JSON.stringify(quotations));
                loadAdminQuotations();
                showToast('Quotation deleted successfully');
            }
        }

        // Open Chat
        function openChat(problemId) {
            const problem = problemReports.find(p => p.id === problemId);
            if (!problem) return;
            
            currentChatCustomer = problem;
            document.getElementById('chat-customer-info').textContent = 
                `Customer: ${problem.name} (${problem.phone})`;
            
            // Load chat messages
            const chatContainer = document.getElementById('chat-container');
            chatContainer.innerHTML = '';
            
            const chatId = `problem_${problemId}`;
            if (!chats[chatId]) {
                chats[chatId] = [];
            }
            
            // Display chat messages
            chats[chatId].forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `chat-message ${msg.sender === 'admin' ? 'admin' : 'customer'}`;
                messageDiv.textContent = msg.text;
                chatContainer.appendChild(messageDiv);
            });
            
            // Scroll to bottom
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // Show chat modal
            document.getElementById('chat-modal').style.display = 'flex';
        }

        // Close Chat
        document.getElementById('close-chat').addEventListener('click', function() {
            document.getElementById('chat-modal').style.display = 'none';
        });

        // Send Message
        document.getElementById('send-message').addEventListener('click', function() {
            const messageInput = document.getElementById('chat-message');
            const message = messageInput.value.trim();
            
            if (!message || !currentChatCustomer) return;
            
            const chatId = `problem_${currentChatCustomer.id}`;
            if (!chats[chatId]) {
                chats[chatId] = [];
            }
            
            // Add admin message
            chats[chatId].push({
                sender: 'admin',
                text: message,
                timestamp: new Date().toISOString()
            });
            
            // Save chats
            localStorage.setItem('ips_chats', JSON.stringify(chats));
            
            // Update chat display
            const chatContainer = document.getElementById('chat-container');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message admin';
            messageDiv.textContent = message;
            chatContainer.appendChild(messageDiv);
            
            // Clear input and scroll to bottom
            messageInput.value = '';
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // Simulate customer response after a delay
            setTimeout(() => {
                const responses = [
                    "Thank you for your response.",
                    "I'll check that and get back to you.",
                    "That sounds good, thank you for the help.",
                    "When can you send someone to fix this?",
                    "I appreciate your assistance with this issue."
                ];
                
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                chats[chatId].push({
                    sender: 'customer',
                    text: randomResponse,
                    timestamp: new Date().toISOString()
                });
                
                localStorage.setItem('ips_chats', JSON.stringify(chats));
                
                const responseDiv = document.createElement('div');
                responseDiv.className = 'chat-message customer';
                responseDiv.textContent = randomResponse;
                chatContainer.appendChild(responseDiv);
                
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 2000);
        });

        // Send message on Enter key
        document.getElementById('chat-message').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('send-message').click();
            }
        });

        // Change Admin Password with OTP
        document.getElementById('change-password-btn').addEventListener('click', function() {
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                showToast('Please fill in all password fields', 'error');
                return;
            }
            
            if (currentPassword !== ADMIN_CREDENTIALS.password) {
                showToast('Current password is incorrect', 'error');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showToast('New passwords do not match', 'error');
                return;
            }
            
            if (newPassword.length < 6) {
                showToast('New password must be at least 6 characters long', 'error');
                return;
            }
            
            // Generate OTP
            const otp = Math.floor(100000 + Math.random() * 900000).toString();
            localStorage.setItem('ips_admin_otp', otp);
            
            // Send OTP via WhatsApp
            const message = `*Iggy Power Solutions - Admin Password Change*\n\nYour verification code is: ${otp}\n\nEnter this code to confirm your password change.`;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${ADMIN_CREDENTIALS.phone}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
            
            // Show OTP verification section
            document.getElementById('otp-verification-section').style.display = 'block';
            showToast('OTP sent to admin WhatsApp');
        });

        // Verify OTP and Change Password
        document.getElementById('verify-otp-btn').addEventListener('click', function() {
            const enteredOtp = document.getElementById('admin-otp').value;
            const storedOtp = localStorage.getItem('ips_admin_otp');
            const newPassword = document.getElementById('new-password').value;
            
            if (!enteredOtp) {
                showToast('Please enter the OTP', 'error');
                return;
            }
            
            if (enteredOtp !== storedOtp) {
                showToast('Invalid OTP', 'error');
                return;
            }
            
            // Update admin password
            ADMIN_CREDENTIALS.password = newPassword;
            
            // Clear OTP and fields
            localStorage.removeItem('ips_admin_otp');
            document.getElementById('current-password').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';
            document.getElementById('admin-otp').value = '';
            document.getElementById('otp-verification-section').style.display = 'none';
            
            showToast('Password changed successfully');
        });

        // Setup Admin Navigation
        function setupAdminNavigation() {
            document.querySelectorAll('.admin-dashboard .dashboard-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    document.querySelectorAll('.admin-dashboard .dashboard-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.admin-dashboard .dashboard-tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    this.classList.add('active');
                    document.getElementById(`admin-${tabId}-tab`).classList.add('active');
                    
                    // Refresh data for specific tabs
                    if (tabId === 'problems') {
                        loadAdminProblems();
                    } else if (tabId === 'analytics') {
                        updateAdminAnalytics();
                    } else if (tabId === 'quotations') {
                        loadAdminQuotations();
                    } else if (tabId === 'services') {
                        loadAdminServices();
                    }
                });
            });
        }

        // Setup Media Viewing
        function setupMediaViewing() {
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('media-item') || e.target.parentElement.classList.contains('media-item')) {
                    const mediaItem = e.target.classList.contains('media-item') ? e.target : e.target.parentElement;
                    
                    // Create fullscreen view
                    const fullscreenMedia = document.createElement('div');
                    fullscreenMedia.className = 'media-item fullscreen';
                    
                    // Clone the media element
                    const mediaClone = mediaItem.querySelector('img, video').cloneNode(true);
                    if (mediaClone.tagName === 'VIDEO') {
                        mediaClone.controls = true;
                        mediaClone.autoplay = true;
                    }
                    
                    // Create close button
                    const closeBtn = document.createElement('button');
                    closeBtn.className = 'media-close-btn';
                    closeBtn.innerHTML = '<i class="fas fa-times"></i>';
                    closeBtn.addEventListener('click', function() {
                        document.body.removeChild(fullscreenMedia);
                    });
                    
                    fullscreenMedia.appendChild(mediaClone);
                    fullscreenMedia.appendChild(closeBtn);
                    document.body.appendChild(fullscreenMedia);
                    
                    // Close on escape key
                    document.addEventListener('keydown', function closeOnEscape(e) {
                        if (e.key === 'Escape') {
                            document.body.removeChild(fullscreenMedia);
                            document.removeEventListener('keydown', closeOnEscape);
                        }
                    });
                }
            });
        }

        // Dashboard Tab Functionality
function setupDashboardTabs() {
    document.querySelectorAll('.dashboard-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            const tabId = this.getAttribute('data-tab');
            
            // Remove active class from all tabs and contents
            document.querySelectorAll('.dashboard-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.dashboard-tab-content').forEach(c => c.classList.remove('active'));
            
            // Add active class to clicked tab and corresponding content
            this.classList.add('active');
            document.getElementById(`${tabId}-tab`).classList.add('active');
            
            // Refresh data for specific tabs
            if (tabId === 'orders') {
                updateUserOrders(currentUser.orders);
            } else if (tabId === 'wishlist') {
                updateUserWishlist(currentUser.wishlist);
            }
        });
    });
}

// Edit Profile Functionality
document.getElementById('edit-profile-btn').addEventListener('click', function() {
    const currentUser = JSON.parse(localStorage.getItem('ips_current_user'));
    if (!currentUser) return;
    
    // Fill form with current user data
    document.getElementById('edit-firstname').value = currentUser.firstName;
    document.getElementById('edit-lastname').value = currentUser.lastName;
    document.getElementById('edit-email').value = currentUser.email;
    document.getElementById('edit-phone').value = currentUser.phone || '';
    
    // Show edit modal
    document.getElementById('edit-profile-modal').style.display = 'flex';
});

// Close Edit Profile Modal
document.getElementById('close-edit-profile').addEventListener('click', function() {
    document.getElementById('edit-profile-modal').style.display = 'none';
});

// Save Profile Changes
document.getElementById('save-profile-btn').addEventListener('click', function() {
    const currentUser = JSON.parse(localStorage.getItem('ips_current_user'));
    if (!currentUser) return;
    
    const firstName = document.getElementById('edit-firstname').value;
    const lastName = document.getElementById('edit-lastname').value;
    const email = document.getElementById('edit-email').value;
    const phone = document.getElementById('edit-phone').value;
    const currentPassword = document.getElementById('current-password').value;
    
    if (!firstName || !lastName || !email || !currentPassword) {
        showToast('Please fill in all required fields', 'error');
        return;
    }
    
    // Verify current password
    if (currentPassword !== currentUser.password) {
        showToast('Current password is incorrect', 'error');
        return;
    }
    
    // Update user data
    const users = JSON.parse(localStorage.getItem('ips_users') || '[]');
    const userIndex = users.findIndex(u => u.id === currentUser.id);
    
    if (userIndex !== -1) {
        users[userIndex].firstName = firstName;
        users[userIndex].lastName = lastName;
        users[userIndex].email = email;
        users[userIndex].phone = phone;
        
        // Update current user in localStorage
        const updatedUser = { ...currentUser, firstName, lastName, email, phone };
        localStorage.setItem('ips_current_user', JSON.stringify(updatedUser));
        localStorage.setItem('ips_users', JSON.stringify(users));
        
        // Update dashboard display
        updateUserDashboard(updatedUser);
        
        // Close modal and clear form
        document.getElementById('edit-profile-modal').style.display = 'none';
        document.getElementById('current-password').value = '';
        
        showToast('Profile updated successfully');
    }
});

// Save Settings Functionality
document.getElementById('save-settings').addEventListener('click', function() {
    const currentUser = JSON.parse(localStorage.getItem('ips_current_user'));
    if (!currentUser) return;
    
    const emailNotifications = document.getElementById('email-notifications').checked;
    const smsNotifications = document.getElementById('sms-notifications').checked;
    const newsletter = document.getElementById('newsletter').checked;
    
    // Update user settings
    const users = JSON.parse(localStorage.getItem('ips_users') || '[]');
    const userIndex = users.findIndex(u => u.id === currentUser.id);
    
    if (userIndex !== -1) {
        users[userIndex].settings = {
            emailNotifications,
            smsNotifications,
            newsletter
        };
        
        // Update current user in localStorage
        const updatedUser = { 
            ...currentUser, 
            settings: { emailNotifications, smsNotifications, newsletter } 
        };
        localStorage.setItem('ips_current_user', JSON.stringify(updatedUser));
        localStorage.setItem('ips_users', JSON.stringify(users));
        
        showToast('Settings saved successfully');
    }
});

// Global wishlist functions
function addWishlistItemToCart(productId) {
    const product = products.find(p => p.id === parseInt(productId));
    if (!product) return;
    
    // Add to cart
    const existingItem = cart.find(item => item.name === product.name);
    
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({
            name: product.name,
            price: parseFloat(product.price.replace('KSh ', '').replace(',', '')),
            quantity: 1
        });
    }
    
    updateCartCount();
    updateCartDisplay();
    showToast(`${product.name} added to cart from wishlist!`, 'success');
}

function removeFromWishlist(productId) {
    const currentUser = JSON.parse(localStorage.getItem('ips_current_user'));
    if (!currentUser) return;
    
    const users = JSON.parse(localStorage.getItem('ips_users') || '[]');
    const userIndex = users.findIndex(u => u.id === currentUser.id);
    
    if (userIndex !== -1) {
        users[userIndex].wishlist = users[userIndex].wishlist.filter(item => item.id !== productId);
        
        // Update current user
        const updatedUser = { ...currentUser, wishlist: users[userIndex].wishlist };
        localStorage.setItem('ips_current_user', JSON.stringify(updatedUser));
        localStorage.setItem('ips_users', JSON.stringify(users));
        
        // Update wishlist display
        updateUserWishlist(updatedUser.wishlist);
        
        showToast('Item removed from wishlist');
    }
}

        // Account Icon Click Handler
        document.getElementById('account-icon').addEventListener('click', function() {
            document.getElementById('account').scrollIntoView({ behavior: 'smooth' });
        });

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Setup password toggles
            setupPasswordToggles();
            
            // Setup admin navigation
            setupAdminNavigation();
            
            // Setup media viewing
            setupMediaViewing();
            
            // Load main site data
            loadProducts();
            loadServices();
            loadGallery();

              // Setup dashboard functionality
    setupDashboardTabs();
            
            // Check if user is already logged in
            const currentUser = JSON.parse(localStorage.getItem('ips_current_user'));
            const isAdminLoggedIn = localStorage.getItem('ips_admin_logged_in');
            
            if (currentUser) {
                // User is logged in, show dashboard
                loginForm.style.display = 'none';
                registerForm.style.display = 'none';
                document.getElementById('account-dashboard').style.display = 'block';
                updateUserDashboard(currentUser);
            } else if (isAdminLoggedIn) {
                // Admin is logged in, show admin dashboard
                loginForm.style.display = 'none';
                registerForm.style.display = 'none';
                document.getElementById('admin-dashboard').style.display = 'block';
                loadAdminProducts();
                loadAdminServices();
                loadAdminGallery();
                loadAdminProblems();
                loadAdminQuotations();
                loadAdminOrders();
                updateAdminAnalytics();
            }
            
            // Simulate new problem reports (for demo purposes)
            setInterval(() => {
                if (Math.random() < 0.3) { // 30% chance every 10 seconds
                    const names = ['David Kim', 'Sarah Johnson', 'Michael Brown', 'Emily Wilson'];
                    const types = ['power-outage', 'flickering-lights', 'tripping-breaker', 'socket-issues'];
                    
                    const newProblem = {
                        id: problemReports.length > 0 ? Math.max(...problemReports.map(p => p.id)) + 1 : 1,
                        name: names[Math.floor(Math.random() * names.length)],
                        phone: `2547${Math.floor(10000000 + Math.random() * 90000000)}`,
                        type: types[Math.floor(Math.random() * types.length)],
                        description: 'Having issues with my electrical system. Need assistance as soon as possible.',
                        date: new Date().toISOString(),
                        images: [],
                        videos: [],
                        urgent: Math.random() < 0.5 // 50% chance of being urgent
                    };
                    
                    problemReports.push(newProblem);
                    localStorage.setItem('ips_problems', JSON.stringify(problemReports));
                    
                    // If we're on the problems tab, reload the problems
                    if (document.getElementById('admin-problems-tab').classList.contains('active')) {
                        loadAdminProblems();
                    }
                    
                    // Update analytics
                    updateAdminAnalytics();
                    
                    // Show notification for urgent problems
                    if (newProblem.urgent) {
                        showToast(`New urgent problem reported by ${newProblem.name}`, 'warning');
                    }
                }
            }, 10000); // Check every 10 seconds
        });

        // Attach product event listeners
        function attachProductEventListeners() {
            // Add to cart buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const productCard = this.closest('.product-card');
                    const productName = productCard.querySelector('h3').textContent;
                    const productPrice = parseFloat(productCard.querySelector('.product-price').textContent.replace('KSh ', '').replace(',', ''));
                    
                    // Check if product is already in cart
                    const existingItem = cart.find(item => item.name === productName);
                    
                    if (existingItem) {
                        existingItem.quantity += 1;
                    } else {
                        cart.push({
                            name: productName,
                            price: productPrice,
                            quantity: 1
                        });
                    }
                    
                    updateCartCount();
                    updateCartDisplay();
                    
                    // Show notification
                    showToast(`${productName} added to cart!`, 'success');
                });
            });

            // Notify me buttons
            document.querySelectorAll('.notify-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const productName = this.getAttribute('data-product');
                    const message = `*Iggy Power Solutions - Product Notification*\n\nHello, I'm interested in the ${productName}. Please notify me when it's back in stock.`;
                    const encodedMessage = encodeURIComponent(message);
                    const whatsappUrl = `https://wa.me/254111923477?text=${encodedMessage}`;
                    window.open(whatsappUrl, '_blank');
                });
            });

            // Detail buttons
            document.querySelectorAll('.detail-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = this.getAttribute('data-product');
                    const product = products.find(p => p.id === parseInt(productId));
                    
                    if (product) {
                        document.getElementById('detail-product-name').textContent = product.name;
                        document.getElementById('detail-product-price').textContent = product.price;
                        document.getElementById('detail-product-description').innerHTML = `<p>${product.description}</p>`;
                        document.getElementById('detail-product-icon').className = product.icon;
                        
                        // Update specifications
                        const specsList = document.getElementById('detail-product-specs');
                        specsList.innerHTML = '';
                        product.specs.forEach(spec => {
                            const li = document.createElement('li');
                            li.innerHTML = `<i class="fas fa-check"></i> ${spec}`;
                            specsList.appendChild(li);
                        });
                        
                        // Update actions based on stock status
                        const actionsContainer = document.getElementById('detail-product-actions');
                        actionsContainer.innerHTML = '';
                        
                        if (product.inStock) {
                            const addToCartBtn = document.createElement('button');
                            addToCartBtn.className = 'add-to-cart';
                            addToCartBtn.innerHTML = '<i class="fas fa-cart-plus"></i> Add to Cart';
                            addToCartBtn.addEventListener('click', function() {
                                // Add to cart logic
                                const existingItem = cart.find(item => item.name === product.name);
                                
                                if (existingItem) {
                                    existingItem.quantity += 1;
                                } else {
                                    cart.push({
                                        name: product.name,
                                        price: parseFloat(product.price.replace('KSh ', '').replace(',', '')),
                                        quantity: 1
                                    });
                                }
                                
                                updateCartCount();
                                updateCartDisplay();
                                document.getElementById('product-modal').style.display = 'none';
                                showToast(`${product.name} added to cart!`, 'success');
                            });
                            actionsContainer.appendChild(addToCartBtn);
                        } else {
                            const notifyBtn = document.createElement('button');
                            notifyBtn.className = 'notify-btn';
                            notifyBtn.innerHTML = '<i class="fab fa-whatsapp"></i> Notify Me';
                            notifyBtn.setAttribute('data-product', product.name);
                            notifyBtn.addEventListener('click', function() {
                                const message = `*Iggy Power Solutions - Product Notification*\n\nHello, I'm interested in the ${product.name}. Please notify me when it's back in stock.`;
                                const encodedMessage = encodeURIComponent(message);
                                const whatsappUrl = `https://wa.me/254111923477?text=${encodedMessage}`;
                                window.open(whatsappUrl, '_blank');
                            });
                            actionsContainer.appendChild(notifyBtn);
                        }
                        
                        document.getElementById('product-modal').style.display = 'flex';
                    }
                });
            });
        }

        // Attach service event listeners
        function attachServiceEventListeners() {
            // Service booking buttons
            document.querySelectorAll('.service-card .btn').forEach(button => {
                button.addEventListener('click', function() {
                    const serviceName = this.getAttribute('data-service');
                    const message = `*Iggy Power Solutions - Service Booking*\n\nHello, I would like to book the ${serviceName} service. Please provide more details.`;
                    const encodedMessage = encodeURIComponent(message);
                    const whatsappUrl = `https://wa.me/254111923477?text=${encodedMessage}`;
                    window.open(whatsappUrl, '_blank');
                });
            });

            // Service detail buttons
            document.querySelectorAll('.service-card .detail-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const serviceId = this.getAttribute('data-service');
                    const service = servicesData.find(s => s.id === parseInt(serviceId));
                    
                    if (service) {
                        document.getElementById('detail-service-name').textContent = service.name;
                        document.getElementById('detail-service-price').textContent = service.price;
                        document.getElementById('detail-service-description').innerHTML = `<p>${service.description}</p>`;
                        document.getElementById('detail-service-icon').className = service.icon;
                        
                        // Update features
                        const featuresList = document.getElementById('detail-service-features');
                        featuresList.innerHTML = '';
                        service.features.forEach(feature => {
                            const li = document.createElement('li');
                            li.innerHTML = `<i class="fas fa-check"></i> ${feature}`;
                            featuresList.appendChild(li);
                        });
                        
                        // Update book button
                        const bookBtn = document.getElementById('detail-service-book');
                        bookBtn.setAttribute('data-service', service.name);
                        
                        document.getElementById('service-modal').style.display = 'flex';
                    }
                });
            });
        }

        // Cart functionality
        const cartIcon = document.getElementById('cart-icon');
        const cartModal = document.getElementById('cart-modal');
        const closeCart = document.getElementById('close-cart');
        const cartItems = document.querySelector('.cart-items');
        const cartTotalPrice = document.getElementById('cart-total-price');
        const checkoutBtn = document.getElementById('checkout-btn');
        const cartCount = document.querySelector('.cart-count');

        cartIcon.addEventListener('click', function() {
            cartModal.style.display = 'flex';
            updateCartDisplay();
        });

        closeCart.addEventListener('click', function() {
            cartModal.style.display = 'none';
        });

        checkoutBtn.addEventListener('click', function() {
            if (cart.length === 0) {
                showToast('Your cart is empty!', 'warning');
                return;
            }
            
            let message = `*Iggy Power Solutions - Order*\n\n`;
            message += `I would like to order the following items:\n\n`;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                message += `• ${item.name} (x${item.quantity}) - KSh ${itemTotal.toLocaleString()}\n`;
            });
            
            message += `\nTotal: KSh ${totalPrice.toLocaleString()}\n\n`;
            message += `Please confirm availability and provide payment details.`;
            
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/254111923477?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
            
            // Clear cart after checkout
            cart = [];
            updateCartCount();
            updateCartDisplay();
            cartModal.style.display = 'none';
            
            showToast('Order placed successfully!', 'success');
        });

        function updateCartCount() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = totalItems;
        }

        function updateCartDisplay() {
            cartItems.innerHTML = '';
            totalPrice = 0;
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p>Your cart is empty</p>';
                cartTotalPrice.textContent = 'KSh 0.00';
                return;
            }
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                totalPrice += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-info">
                        <div class="cart-item-img">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="cart-item-details">
                            <h4>${item.name}</h4>
                            <div class="cart-item-price">KSh ${item.price.toLocaleString()}</div>
                        </div>
                    </div>
                    <div class="cart-item-quantity">
                        <button class="quantity-btn decrease" data-index="${index}">-</button>
                        <span>${item.quantity}</span>
                        <button class="quantity-btn increase" data-index="${index}">+</button>
                        <button class="remove-item" data-index="${index}"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                
                cartItems.appendChild(cartItem);
            });
            
            cartTotalPrice.textContent = `KSh ${totalPrice.toLocaleString()}`;
            
            // Add event listeners for quantity buttons
            document.querySelectorAll('.quantity-btn.decrease').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    if (cart[index].quantity > 1) {
                        cart[index].quantity -= 1;
                        updateCartDisplay();
                        updateCartCount();
                        showToast(`${cart[index].name} quantity decreased`, 'success');
                    }
                });
            });
            
            document.querySelectorAll('.quantity-btn.increase').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    cart[index].quantity += 1;
                    updateCartDisplay();
                    updateCartCount();
                    showToast(`${cart[index].name} quantity increased`, 'success');
                });
            });
            
            document.querySelectorAll('.remove-item').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    const itemName = cart[index].name;
                    cart.splice(index, 1);
                    updateCartDisplay();
                    updateCartCount();
                    showToast(`${itemName} removed from cart`, 'error');
                });
            });
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === cartModal) {
                cartModal.style.display = 'none';
            }
            if (e.target === document.getElementById('product-modal')) {
                document.getElementById('product-modal').style.display = 'none';
            }
            if (e.target === document.getElementById('service-modal')) {
                document.getElementById('service-modal').style.display = 'none';
            }
            if (e.target === document.getElementById('edit-profile-modal')) {
                document.getElementById('edit-profile-modal').style.display = 'none';
            }
            if (e.target === document.getElementById('chat-modal')) {
                document.getElementById('chat-modal').style.display = 'none';
            }
            if (e.target === document.getElementById('reset-password-modal')) {
                document.getElementById('reset-password-modal').style.display = 'none';
            }
        });

        // Service booking from detail modal
        document.getElementById('detail-service-book').addEventListener('click', function() {
            const serviceName = this.getAttribute('data-service');
            const message = `*Iggy Power Solutions - Service Booking*\n\nHello, I would like to book the ${serviceName} service. Please provide more details.`;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/254111923477?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        });

        // Close product modal
        document.getElementById('close-product').addEventListener('click', function() {
            document.getElementById('product-modal').style.display = 'none';
        });

        // Close service modal
        document.getElementById('close-service').addEventListener('click', function() {
            document.getElementById('service-modal').style.display = 'none';
        });

        // Scroll to Top Button
        const scrollTop = document.getElementById('scroll-top');

        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                scrollTop.classList.add('active');
            } else {
                scrollTop.classList.remove('active');
            }
        });

        scrollTop.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>
